RNS9304: Program EXWATSON placed in library NOXDB. 00 highest severity. Created on 12-12-18 at 14:34:54.
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      1
  Command  . . . . . . . . . . . . :   CRTBNDRPG
    Issued by  . . . . . . . . . . :     NLI
  Program  . . . . . . . . . . . . :   EXWATSON
    Library  . . . . . . . . . . . :     NOXDB
  Text 'description' . . . . . . . :   *SRCMBRTXT
  Source stream file   . . . . . . :   exWatson.RPGLE
    CCSID  . . . . . . . . . . . . :     500
  Text 'description' . . . . . . . :
  Last Change  . . . . . . . . . . :   12-12-18  14:34:49
  Generation severity level  . . . :   10
  Default activation group . . . . :   *YES
  Compiler options . . . . . . . . :   *XREF      *GEN       *NOSECLVL  *SHOWCPY
                                       *EXPDDS    *EXT       *NOSHOWSKP *NOSRCSTMT
                                       *DEBUGIO   *UNREF     *NOEVENTF
  Debugging views  . . . . . . . . :   *LIST
  Debug encryption key . . . . . . :   *NONE
  Output . . . . . . . . . . . . . :   *PRINT
  Optimization level . . . . . . . :   *NONE
  Source listing indentation . . . :   *NONE
  Type conversion options  . . . . :   *NONE
  Sort sequence  . . . . . . . . . :   *HEX
  Language identifier  . . . . . . :   *JOBRUN
  Replace program  . . . . . . . . :   *YES
  User profile . . . . . . . . . . :   *USER
  Authority  . . . . . . . . . . . :   *LIBCRTAUT
  Truncate numeric . . . . . . . . :   *YES
  Fix numeric  . . . . . . . . . . :   *NONE
  Target release . . . . . . . . . :   *CURRENT
  Allow null values  . . . . . . . :   *NO
  Define condition names . . . . . :   *NONE
  Enable performance collection  . :   *PEP
  Profiling data . . . . . . . . . :   *NOCOL
  Licensed Internal Code options . :
  Generate program interface . . . :   *NO
  Include directory  . . . . . . . :   ./..
                                   :   /prj/noxdb
  Preprocessor options . . . . . . :   *NONE
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      2
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
                          S o u r c e   L i s t i n g
     1 **free                                                                                                               000001
     2 // -----------------------------------------------------------------------------                                     000002
     3 //                                                                                                                   000003
     4 //  Examples  - Watson and curl                                                                                      000004
     5 //                                                                                                                   000005
     6 // https://watson-api-explorer.mybluemix.net/                                                                        000006
     7 //                                                                                                                   000007
     8 //  Translate text using watson API:                                                                                 000008
     9 // -----------------------------------------------------------------------------                                     000009
    10 ctl-opt copyright('System & Method (C), 2018');                                                                      000010
    11 ctl-opt decEdit('0,') datEdit(*YMD.) main(main);                                                                     000011
    12 ctl-opt bndDir('NOXDB');                                                                                             000012
    13                                                                                                                      000013
    14 /include ./headers/jsonparser.rpgle                                                                                  000014
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  jsonparse+                                                   *                     1
        * External name  . . . . . . :  ./.././headers/jsonparser.rpgle                              *                     1
        * Last change  . . . . . . . :  26-10-18  15:18:47                                           *                     1
        *--------------------------------------------------------------------------------------------*
    15+   //---------------------------------------------------------------------- *                                       1000001
    16+   //This is the prototype for BlueSeries/IceBreak - JSON and XML parser                                            1000002
    17+   //Use the JSONXML binddir when creating your program and include this                                            1000003
    18+   //prototypes like:                                                                                               1000004
    19+                                                                                                                    1000005
    20+   //H BNDDIR('JSONPARSER')                                                                                         1000006
    21+   ///include jsonParser                                                                                            1000007
    22+                                                                                                                    1000008
    23+   //Or                                                                                                             1000009
    24+                                                                                                                    1000010
    25+   //H BNDDIR('XMLPARSER')                                                                                          1000011
    26+   ///include xmlParser                                                                                             1000012
    27+                                                                                                                    1000013
    28+   //Note: Both XMLPARSER and JSONPARSER headers are autogenerated from                                             1000014
    29+   //the JSONXML header. so please do not make any changes th there headerfi                                        1000015
    30+                                                                                                                    1000016
    31+   //Note: all binddirectories JSONPARSER, XMLPARSER and JSONXML is the same                                        1000017
    32+   //---------------------------------------------------------------------- *                                       1000018
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      3
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    33+ /if defined( json_DEF)                                                                                             1000019
            LINES EXCLUDED: 1
    34+ /endif                                                                                                             1000021
    35+ /define  json_DEF                                                                                                  1000022
    36+   //---------------------------------------------------------------------- *                                       1000023
    37+   //Before starting that parser - to enshure right enterpretations of delimi                                       1000024
    38+   //Usage:                                                                                                         1000025
    39+   //jx_setDelimiters( json_DELIMITERS);                                                                            1000026
    40+   //--------------------------------------------------------------------- *                                        1000027
    41+   //get delimiter pointer                                                                                          1000028
        *--------------------------------------------------------------------*
        * Compiler Options in Effect:                                        *
        *--------------------------------------------------------------------*
        *  Text 'description' . . . . . . . :                                *
        *  Generation severity level  . . . :   10                           *
        *  Default activation group . . . . :   *NO                          *
        *  Compiler options . . . . . . . . :   *XREF      *GEN              *
        *                                       *NOSECLVL  *SHOWCPY          *
        *                                       *EXPDDS    *EXT              *
        *                                       *NOSHOWSKP *NOSRCSTMT        *
        *                                       *DEBUGIO   *UNREF            *
        *                                       *NOEVENTF                    *
        *  Optimization level . . . . . . . :   *NONE                        *
        *  Source listing indentation . . . :   *NONE                        *
        *  Type conversion options  . . . . :   *NONE                        *
        *  Sort sequence  . . . . . . . . . :   *HEX                         *
        *  Language identifier  . . . . . . :   *JOBRUN                      *
        *  User profile . . . . . . . . . . :   *USER                        *
        *  Authority  . . . . . . . . . . . :   *LIBCRTAUT                   *
        *  Truncate numeric . . . . . . . . :   *YES                         *
        *  Fix numeric  . . . . . . . . . . :   *NONE                        *
        *  Allow null values  . . . . . . . :   *NO                          *
        *  Storage model . . .  . . . . . . :   *SNGLVL                      *
        *  Binding directory from Command . :   *NONE                        *
        *  Binding directory from Source  . :   NOXDB                        *
        *    Library  . . . . . . . . . . . :     *LIBL                      *
        *  Activation group . . . . . . . . :   *STGMDL                      *
        *  Enable performance collection  . :   *PEP                         *
        *  Profiling data . . . . . . . . . :   *NOCOL                       *
        *  Generate program interface . . . :   *NO                          *
        *--------------------------------------------------------------------*
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      4
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    42+   Dcl-PR json_getDelimiters Pointer extproc(*CWIDEN :'jx_GetDelimiters');                                          1000029
    43+   End-PR;                                                                                                          1000030
    44+   //Set delimiter used for locate expression                                                                       1000031
    45+   Dcl-PR json_setDelimiters  extproc(*CWIDEN :'jx_SetDelimiters2');                                                1000032
    46+     //always: '/\@[] .{}' in your  local CCSID                                                                     1000033
    47+     delimiterStr   Pointer    value options(*string);                                                              1000034
    48+   End-PR;                                                                                                          1000035
    49+                                                                                                                    1000036
    50+   Dcl-C json_DELIMITERS const('/\@[] .{}''"');                                                                     1000037
    51+                                                                                                                    1000038
    52+   //---------------------------------------------------------------------- *                                       1000039
    53+   //Type of a node:                                                                                                1000040
    54+   //---------------------------------------------------------------------- *                                       1000041
    55+   Dcl-C json_UNKNOWN const(0);                                                                                     1000042
    56+   Dcl-C json_OBJECT  const(1);                                                                                     1000043
    57+   Dcl-C json_ARRAY   const(2);                                                                                     1000044
    58+   Dcl-C json_EVAL    const(3);                                                                                     1000045
    59+   Dcl-C json_POINTER_VALUE const(4);                                                                               1000046
    60+   Dcl-C json_VALUE   const(5);                                                                                     1000047
    61+   Dcl-C json_ROOT    const(6);                                                                                     1000048
    62+   Dcl-C json_LITERAL const(16);                                                                                    1000049
    63+   Dcl-C json_OBJLINK const(17);                                                                                    1000050
    64+   Dcl-C json_OBJREPLACE const(18);                                                                                 1000051
    65+   Dcl-C json_OBJCOPY const(18);                                                                                    1000052
    66+   Dcl-C json_BY_CONTEXT const(19);                                                                                 1000053
    67+   Dcl-C json_OBJMOVE const(2048);                                                                                  1000054
    68+                                                                                                                    1000055
    69+   //* Modifiers to "add" / "or" into "parseString" and "evaluate"                                                  1000056
    70+   //!! Type - have to be backwards compat.                                                                         1000057
    71+   //Unlink the source and move it to dest.                                                                         1000058
    72+   Dcl-C json_MOVE_MODES const(2048);                                                                               1000059
    73+   //Allow strings ints and other values to                                                                         1000060
    74+   Dcl-C json_ALLOW_PRIMITIVES const(4096);                                                                         1000061
    75+                                                                                                                    1000062
    76+   //* Combinations:                                                                                                1000063
    77+   //JX_PARSE  = json_EVAL + json_MOVE_NODES                                                                        1000064
    78+   Dcl-C json_PARSE   const(2051);                                                                                  1000065
    79+                                                                                                                    1000066
    80+   //Merge options:                                                                                                 1000067
    81+   //Modifiers to "add" / "or" into "JSON_EVAL"                                                                     1000068
    82+ /if not defined(MO_MERGE)                                                                                          1000069
    83+ /define  MO_MERGE                                                                                                  1000070
    84+   //Only new elements are merged - existing                                                                        1000071
    85+   //are left untouched                                                                                             1000072
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      5
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
    86+   Dcl-C MO_MERGE_NEW const(256);                                                                                   1000073
    87+   //Merge and replace only existing nodes.                                                                         1000074
    88+   Dcl-C MO_MERGE_MATCH const(512);                                                                                 1000075
    89+   //Merge all: replace if it exists and                                                                            1000076
    90+   //append new nodes if not exists                                                                                 1000077
    91+   Dcl-C MO_MERGE_REPLACE const(1024 );                                                                             1000078
    92+ /endif                                                                                                             1000079
    93+                                                                                                                    1000080
    94+   Dcl-C json_CHILD_LIST const('[0]');                                                                              1000081
    95+                                                                                                                    1000082
    96+   //---------------------------------------------------------------------- *                                       1000083
    97+   //Returns node to the json_object tree                                                                           1000084
    98+   Dcl-PR json_ParseFile Pointer extproc(*CWIDEN:'jx_ParseFile');                                                   1000085
    99+     //File to parse                                                                                                1000086
   100+     FileName       Pointer    value options(*string);                                                              1000087
   101+     //Parsing options                                                                                              1000088
   102+     Options        Pointer    value options(*string:*nopass);                                                      1000089
   103+   End-PR;                                                                                                          1000090
   104+                                                                                                                    1000091
   105+   //Returns node json_object tree                                                                                  1000092
   106+   Dcl-PR json_ParseString Pointer extproc(*CWIDEN:'jx_ParseString');                                               1000093
   107+     //String to parse                                                                                              1000094
   108+     String         Pointer    value options(*string);                                                              1000095
   109+     //Parsing options                                                                                              1000096
   110+     Options        Pointer    value options(*string:*nopass);                                                      1000097
   111+   End-PR;                                                                                                          1000098
   112+                                                                                                                    1000099
   113+   //Set , or . for numeri decimal point                                                                            1000100
   114+   Dcl-PR json_setDecPoint  extproc(*CWIDEN : 'jx_SetDecPoint');                                                    1000101
   115+     //decimal point char                                                                                           1000102
   116+     decPoint       Pointer    value options(*string);                                                              1000103
   117+   End-PR;                                                                                                          1000104
   118+                                                                                                                    1000105
   119+                                                                                                                    1000106
   120+                                                                                                                    1000107
   121+   //Bool true if errors occures                                                                                    1000108
   122+   Dcl-PR json_Error Ind extproc(*CWIDEN:'jx_Error');                                                               1000109
   123+     //jx_Object  node                                                                                              1000110
   124+     pNode          Pointer    value;                                                                               1000111
   125+   End-PR;                                                                                                          1000112
   126+                                                                                                                    1000113
   127+   //Return error description                                                                                       1000114
   128+   Dcl-PR json_Message Varchar(1024) extproc(*CWIDEN:'jx_Message');                                                 1000115
   129+     //jx_Object                                                                                                    1000116
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      6
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   130+     pNode          Pointer    value;                                                                               1000117
   131+   End-PR;                                                                                                          1000118
   132+                                                                                                                    1000119
   133+   //Returns pointer to node                                                                                        1000120
   134+   Dcl-PR json_Locate Pointer extproc(*CWIDEN : 'jx_GetNode');                                                      1000121
   135+     //Pointer to tree or node                                                                                      1000122
   136+     pNode          Pointer    value;                                                                               1000123
   137+     //location expression                                                                                          1000124
   138+     Expression     Pointer    value options(*string);                                                              1000125
   139+   End-PR;                                                                                                          1000126
   140+                                                                                                                    1000127
   141+   //Returns pointer to node                                                                                        1000128
   142+   Dcl-PR json_LocateOrCreate Pointer                                                                               1000129
   143+                            extproc(*CWIDEN : 'jx_GetOrCreateNode');                                                1000130
   144+     //Pointer to tree or node                                                                                      1000131
   145+     pNode          Pointer    value;                                                                               1000132
   146+     //location expression                                                                                          1000133
   147+     Expression     Pointer    value options(*string);                                                              1000134
   148+   End-PR;                                                                                                          1000135
   149+                                                                                                                    1000136
   150+   //Returns 'ON' if node exists                                                                                    1000137
   151+   Dcl-PR json_Has Ind extproc(*CWIDEN : 'jx_Has');                                                                 1000138
   152+     //Pointer to tree or node                                                                                      1000139
   153+     pNode          Pointer    value;                                                                               1000140
   154+     //Path to node                                                                                                 1000141
   155+     NodeName       Pointer    value options(*string);                                                              1000142
   156+   End-PR;                                                                                                          1000143
   157+                                                                                                                    1000144
   158+   //Returns 'ON' if node exists and has <> 0                                                                       1000145
   159+   Dcl-PR json_isTrue Ind extproc(*CWIDEN : 'jx_IsTrue');                                                           1000146
   160+     //Pointer to tree or node                                                                                      1000147
   161+     pNode          Pointer    value;                                                                               1000148
   162+     //Path to node                                                                                                 1000149
   163+     NodeName       Pointer    value options(*string);                                                              1000150
   164+   End-PR;                                                                                                          1000151
   165+                                                                                                                    1000152
   166+   //Returns 'ON' if node exists and has <> 0                                                                       1000153
   167+   Dcl-PR json_isNull Ind extproc(*CWIDEN : 'jx_IsNull');                                                           1000154
   168+     //Pointer to tree or node                                                                                      1000155
   169+     pNode          Pointer    value;                                                                               1000156
   170+     //Path to node                                                                                                 1000157
   171+     NodeName       Pointer    value options(*string);                                                              1000158
   172+   End-PR;                                                                                                          1000159
   173+                                                                                                                    1000160
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      7
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   174+   //Returns 'ON' if it is a valid node                                                                             1000161
   175+   Dcl-PR json_isNode Ind extproc(*CWIDEN : 'jx_isNode');                                                           1000162
   176+     //a.k.a. false for strings                                                                                     1000163
   177+     pNode          Pointer    value;                                                                               1000164
   178+   End-PR;                                                                                                          1000165
   179+                                                                                                                    1000166
   180+   //renames the node name                                                                                          1000167
   181+   Dcl-PR json_NodeRename Ind extproc(*CWIDEN : 'jx_NodeRename');                                                   1000168
   182+     //Pointer to tree or node                                                                                      1000169
   183+     pNode          Pointer    value;                                                                               1000170
   184+     //Path to node                                                                                                 1000171
   185+     NodeName       Pointer    value options(*string);                                                              1000172
   186+   End-PR;                                                                                                          1000173
   187+                                                                                                                    1000174
   188+   //Returns pointer to next sibling (elem)                                                                         1000175
   189+   Dcl-PR json_GetNext Pointer extproc(*CWIDEN : 'jx_GetNodeNext');                                                 1000176
   190+     //Pointer to current node (elem)                                                                               1000177
   191+     pNode          Pointer    value;                                                                               1000178
   192+   End-PR;                                                                                                          1000179
   193+                                                                                                                    1000180
   194+   //Returns pointer to first child (elem)                                                                          1000181
   195+   Dcl-PR json_GetChild Pointer extproc(*CWIDEN : 'jx_GetNodeChild');                                               1000182
   196+     //Pointer to current node (elem)                                                                               1000183
   197+     pNode          Pointer    value;                                                                               1000184
   198+   End-PR;                                                                                                          1000185
   199+                                                                                                                    1000186
   200+   //Returns pointer to parent node                                                                                 1000187
   201+   Dcl-PR json_GetParent Pointer extproc(*CWIDEN : 'jx_GetNodeParent');                                             1000188
   202+     //Pointer to current node (elem)                                                                               1000189
   203+     pNode          Pointer    value;                                                                               1000190
   204+   End-PR;                                                                                                          1000191
   205+                                                                                                                    1000192
   206+   Dcl-PR json_SetEval pointer extproc(*CWIDEN:'jx_SetEvalByName');                                                 1000193
   207+     pNode          Pointer    value;                                                                               1000194
   208+     Expresion      Pointer    value options(*string);                                                              1000195
   209+     Value          Pointer    value options(*string);                                                              1000196
   210+   End-PR;                                                                                                          1000197
   211+                                                                                                                    1000198
   212+   Dcl-PR json_SetStr Pointer extproc(*CWIDEN: 'jx_SetStrByName');                                                  1000199
   213+     //Pointer to json_ tree                                                                                        1000200
   214+     pNode          Pointer    value;                                                                               1000201
   215+     //X-path locations to node or attributes                                                                       1000202
   216+     Expresion      Pointer    value options(*string);                                                              1000203
   217+     //New value to set / pointer to object                                                                         1000204
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      8
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   218+     Value          Pointer    value options(*string);                                                              1000205
   219+   End-PR;                                                                                                          1000206
   220+                                                                                                                    1000207
   221+   Dcl-PR json_SetInt Pointer extproc(*CWIDEN: 'jx_SetIntByName');                                                  1000208
   222+     //Pointer to json_ tree                                                                                        1000209
   223+     pNode          Pointer    value;                                                                               1000210
   224+     //X-path locations to node or attributes                                                                       1000211
   225+     Expresion      Pointer    value options(*string);                                                              1000212
   226+     //New value to set / pointer to object                                                                         1000213
   227+     Value          Int(10)    value;                                                                               1000214
   228+   End-PR;                                                                                                          1000215
   229+                                                                                                                    1000216
   230+   Dcl-PR json_SetNum Pointer extproc(*CWIDEN: 'jx_SetDecByName');                                                  1000217
   231+     //Pointer to json_ tree                                                                                        1000218
   232+     pNode          Pointer    value;                                                                               1000219
   233+     //X-path locations to node or attributes                                                                       1000220
   234+     Expresion      Pointer    value options(*string);                                                              1000221
   235+     //New value to set / pointer to object                                                                         1000222
   236+     Value          Packed(30:15) value;                                                                            1000223
   237+   End-PR;                                                                                                          1000224
   238+                                                                                                                    1000225
   239+   Dcl-PR json_SetBool Pointer extproc(*CWIDEN: 'jx_SetBoolByName');                                                1000226
   240+     //Pointer to json_ tree                                                                                        1000227
   241+     pNode          Pointer    value;                                                                               1000228
   242+     //X-path locations to node or attributes                                                                       1000229
   243+     Expresion      Pointer    value options(*string);                                                              1000230
   244+     //New value to set / pointer to object                                                                         1000231
   245+     Value          Ind        value;                                                                               1000232
   246+   End-PR;                                                                                                          1000233
   247+                                                                                                                    1000234
   248+   Dcl-PR json_SetPtr Pointer extproc(*CWIDEN: 'jx_SetPtrByName');                                                  1000235
   249+     //Pointer to json_ tree                                                                                        1000236
   250+     pNode          Pointer    value;                                                                               1000237
   251+     //X-path locations to node or attributes                                                                       1000238
   252+     Expresion      Pointer    value options(*string);                                                              1000239
   253+     //Pointer to anything - You do the cleanup                                                                     1000240
   254+     Value          Pointer    value;                                                                               1000241
   255+   End-PR;                                                                                                          1000242
   256+                                                                                                                    1000243
   257+   Dcl-PR json_SetValue Pointer extproc(*CWIDEN: 'jx_SetValueByName');                                              1000244
   258+     //Pointer to json_ tree                                                                                        1000245
   259+     pNode          Pointer    value;                                                                               1000246
   260+     //X-path locations to node or attributes                                                                       1000247
   261+     Expresion      Pointer    value options(*string);                                                              1000248
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page      9
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   262+     //New value to set / pointer to object                                                                         1000249
   263+     Value          Pointer    value options(*string:*nopass);                                                      1000250
   264+     //Optional new type (Refer "node type"                                                                         1000251
   265+     Type           Uns(5)     value options(*nopass);                                                              1000252
   266+   End-PR;                                                                                                          1000253
   267+                                                                                                                    1000254
   268+   Dcl-PR json_GetValueStr Varchar(32767)                                                                           1000255
   269+                         extproc(*CWIDEN : 'jx_GetNodeValueVC');                                                    1000256
   270+     //Pointer to node                                                                                              1000257
   271+     pNode          Pointer    value;                                                                               1000258
   272+     //If not found - default value                                                                                 1000259
   273+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000260
   274+   End-PR;                                                                                                          1000261
   275+                                                                                                                    1000262
   276+   Dcl-PR json_GetValueNum Packed(30:15)                                                                            1000263
   277+                         extproc(*CWIDEN : 'jx_GetNodeValueNum');                                                   1000264
   278+     //Pointer to node                                                                                              1000265
   279+     pNode          Pointer    value;                                                                               1000266
   280+     //If not found - default value                                                                                 1000267
   281+     Defaultvalue   Packed(30:15) value options(*NOPASS);                                                           1000268
   282+   End-PR;                                                                                                          1000269
   283+                                                                                                                    1000270
   284+   Dcl-PR json_GetValuePtr Pointer extproc(*CWIDEN : 'jx_GetNodeValuePtr');                                         1000271
   285+     //Pointer to node                                                                                              1000272
   286+     pNode          Pointer    value;                                                                               1000273
   287+     //If not found - default value                                                                                 1000274
   288+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000275
   289+   End-PR;                                                                                                          1000276
   290+                                                                                                                    1000277
   291+   Dcl-PR json_GetName Varchar(32767)                                                                               1000278
   292+                     extproc(*CWIDEN : 'jx_GetNodeNameVC');                                                         1000279
   293+     //Pointer to node                                                                                              1000280
   294+     pNode          Pointer    value;                                                                               1000281
   295+   End-PR;                                                                                                          1000282
   296+                                                                                                                    1000283
   297+   Dcl-PR json_GetNameAsPath Varchar(32767)                                                                         1000284
   298+                           extproc(*CWIDEN : 'jx_GetNodeNameAsPath');                                               1000285
   299+     //Pointer to node                                                                                              1000286
   300+     pNode          Pointer    value;                                                                               1000287
   301+     //Delimiter like - or . or / or \                                                                              1000288
   302+     Delimiter      Char(1)    value;                                                                               1000289
   303+   End-PR;                                                                                                          1000290
   304+                                                                                                                    1000291
   305+   //* Refer to node type above                                                                                     1000292
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     10
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   306+   Dcl-PR json_NodeType Int(5) extproc(*CWIDEN : 'jx_GetNodeType');                                                 1000293
   307+     //Pointer to json_ tree to receive format                                                                      1000294
   308+     pNode          Pointer    value;                                                                               1000295
   309+   End-PR;                                                                                                          1000296
   310+                                                                                                                    1000297
   311+ // Get string by expresion                                                                                         1000298
   312+ //  /object/array[123]/name                                                                                        1000299
   313+ //  .object.array[123].name                                                                                        1000300
   314+   Dcl-PR json_GetStr Varchar(32767) extproc(*CWIDEN : 'jx_GetValueVC');                                            1000301
   315+     //Pointer to relative node                                                                                     1000302
   316+     pNode          Pointer    value;                                                                               1000303
   317+     //Locations expression to node                                                                                 1000304
   318+     Expression     Pointer    value options(*string:*nopass);                                                      1000305
   319+     //If not found - default value                                                                                 1000306
   320+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000307
   321+   End-PR;                                                                                                          1000308
   322+                                                                                                                    1000309
   323+ //  will join all subsequent array nodes into one resulting string                                                 1000310
   324+   Dcl-PR json_GetStrJoin Varchar(32767)                                                                            1000311
   325+                        extproc(*CWIDEN : 'jx_GetStrJoinVC');                                                       1000312
   326+     //Pointer to relative node                                                                                     1000313
   327+     pNode          Pointer    value;                                                                               1000314
   328+     //Locations expression to node                                                                                 1000315
   329+     Expression     Pointer    value options(*string:*nopass);                                                      1000316
   330+     //If not found - default value                                                                                 1000317
   331+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000318
   332+   End-PR;                                                                                                          1000319
   333+                                                                                                                    1000320
   334+ // Get number by expresion like:                                                                                   1000321
   335+ //  /object/array[123]/name                                                                                        1000322
   336+ //  .object.array[123].name                                                                                        1000323
   337+   Dcl-PR json_GetNum Packed(30:15) extproc(*CWIDEN : 'jx_GetValueNum');                                            1000324
   338+     //Pointer to relative node                                                                                     1000325
   339+     pNode          Pointer    value;                                                                               1000326
   340+     //Locations expression to node                                                                                 1000327
   341+     Expression     Pointer    value options(*string:*nopass);                                                      1000328
   342+     //If not found - default value                                                                                 1000329
   343+     Defaultvalue   Packed(30:15) value options(*nopass);                                                           1000330
   344+   End-PR;                                                                                                          1000331
   345+                                                                                                                    1000332
   346+   Dcl-PR json_GetInt Int(20) extproc(*CWIDEN : 'jx_GetValueInt');                                                  1000333
   347+     //Pointer to relative node                                                                                     1000334
   348+     pNode          Pointer    value;                                                                               1000335
   349+     //Locations expression to node                                                                                 1000336
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     11
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   350+     Expression     Pointer    value options(*string:*nopass);                                                      1000337
   351+     //If not found - default value                                                                                 1000338
   352+     Defaultvalue   Int(20)    value options(*nopass);                                                              1000339
   353+   End-PR;                                                                                                          1000340
   354+                                                                                                                    1000341
   355+   //Set an ILOB object to a value found by X                                                                       1000342
   356+   //Return *ON if found                                                                                            1000343
   357+   Dcl-PR json_GetIlobValue Ind extproc(*CWIDEN :'ILOB_XmlGetValue');                                               1000344
   358+     //Pointer to ILOB object to receive the va                                                                     1000345
   359+     pIlob          Pointer    value;                                                                               1000346
   360+     //Pointer to tree                                                                                              1000347
   361+     pNode          Pointer    value;                                                                               1000348
   362+     //X-path locations to node or attributes                                                                       1000349
   363+     Expression     Pointer    value options(*string);                                                              1000350
   364+   End-PR;                                                                                                          1000351
   365+                                                                                                                    1000352
   366+   Dcl-PR json_CopyValue Pointer extproc(*CWIDEN : 'jx_CopyValue');                                                 1000353
   367+     //destination node                                                                                             1000354
   368+     pDest          Pointer    value;                                                                               1000355
   369+     //destiantion name (or *NULL or '')                                                                            1000356
   370+     destName       Pointer    value options(*string);                                                              1000357
   371+     //source node                                                                                                  1000358
   372+     pSource        Pointer    value;                                                                               1000359
   373+     //source name (or *NULL or '')                                                                                 1000360
   374+     sourceName     Pointer    value options(*string);                                                              1000361
   375+   End-PR;                                                                                                          1000362
   376+                                                                                                                    1000363
   377+   Dcl-PR json_NodeCopy extproc(*CWIDEN : 'jx_NodeCopy');                                                           1000364
   378+     //node. Retrive from Locate()                                                                                  1000365
   379+     pRootNode      Pointer    value;                                                                               1000366
   380+     //node. Retrive from Locate()                                                                                  1000367
   381+     pNewChild      Pointer    value;                                                                               1000368
   382+     //Reference location to where it arrive                                                                        1000369
   383+     RefLocation    Int(10)    value;                                                                               1000370
   384+   End-PR;                                                                                                          1000371
   385+                                                                                                                    1000372
   386+   //Following constants used by json_NodeCopy:RefLocation                                                          1000373
   387+   Dcl-C json_FIRST_CHILD const(1);                                                                                 1000374
   388+   Dcl-C json_LAST_CHILD const(2);                                                                                  1000375
   389+   Dcl-C json_BEFORE_SIBLING const(3);                                                                              1000376
   390+   Dcl-C json_AFTER_SIBLING const(4);                                                                               1000377
   391+                                                                                                                    1000378
   392+   Dcl-PR json_NodeClone Pointer extproc(*CWIDEN : 'jx_NodeClone');                                                 1000379
   393+     //node. Retrive from Locate()                                                                                  1000380
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     12
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   394+     pSource        Pointer    value;                                                                               1000381
   395+   End-PR;                                                                                                          1000382
   396+                                                                                                                    1000383
   397+   //returns the new node                                                                                           1000384
   398+   Dcl-PR json_NodeAdd Pointer extproc(*CWIDEN : 'jx_NodeAdd');                                                     1000385
   399+     //node. Retrive from Locate()                                                                                  1000386
   400+     pRootNode      Pointer    value;                                                                               1000387
   401+     //Reference location to where it arrive                                                                        1000388
   402+     RefLocation    Int(10)    value;                                                                               1000389
   403+     //Name of node                                                                                                 1000390
   404+     Name           Pointer    value options(*string);                                                              1000391
   405+     //Value or expression                                                                                          1000392
   406+     Value          Pointer    value options(*string);                                                              1000393
   407+     //New type (Refer "node type"                                                                                  1000394
   408+     Type           Uns(5)     value;                                                                               1000395
   409+   End-PR;                                                                                                          1000396
   410+                                                                                                                    1000397
   411+   Dcl-PR json_NodeDelete extproc(*CWIDEN : 'jx_NodeDelete');                                                       1000398
   412+     //node. Retrive from Locate()                                                                                  1000399
   413+     pRootNode      Pointer    value;                                                                               1000400
   414+   End-PR;                                                                                                          1000401
   415+                                                                                                                    1000402
   416+   //Unlink the note from its previous and promote it as a new root node                                            1000403
   417+   Dcl-PR json_NodeUnlink Pointer extproc(*CWIDEN : 'jx_NodeUnlink');                                               1000404
   418+     //Targenode. Retrive from Locate(                                                                              1000405
   419+     pNode          Pointer    value;                                                                               1000406
   420+   End-PR;                                                                                                          1000407
   421+                                                                                                                    1000408
   422+   Dcl-PR json_NodeSanitize extproc(*CWIDEN : 'jx_NodeSanitize');                                                   1000409
   423+     //node. Retrive from Locate()                                                                                  1000410
   424+     pRootNode      Pointer    value;                                                                               1000411
   425+   End-PR;                                                                                                          1000412
   426+                                                                                                                    1000413
   427+   //CheckSum of all names and values                                                                               1000414
   428+   //Delete all nodes which value are null                                                                          1000415
   429+   Dcl-PR json_NodeCheckSum Uns(10) extproc(*CWIDEN : 'jx_NodeCheckSum');                                           1000416
   430+     pRootNode      Pointer    value; //node. Retrive from Locate()                                                 1000417
   431+   End-PR;                                                                                                          1000418
   432+                                                                                                                    1000419
   433+   //returns the new node                                                                                           1000420
   434+   Dcl-PR json_NewObject Pointer extproc(*CWIDEN : 'jx_NewObject');                                                 1000421
   435+     //Destination. Retrive from Locate()                                                                           1000422
   436+     pDestNode      Pointer    value options(*nopass);                                                              1000423
   437+   End-PR;                                                                                                          1000424
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     13
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   438+                                                                                                                    1000425
   439+ // Array functions                                                                                                 1000426
   440+   //returns the new node                                                                                           1000427
   441+   Dcl-PR json_NewArray Pointer extproc(*CWIDEN : 'jx_NewArray');                                                   1000428
   442+     //Destination. Retrive from Locate()                                                                           1000429
   443+     pDestNode      Pointer    value options(*nopass);                                                              1000430
   444+   End-PR;                                                                                                          1000431
   445+                                                                                                                    1000432
   446+   //returns the new node added to the end of                                                                       1000433
   447+   Dcl-PR json_ArrayPush Pointer extproc(*CWIDEN : 'jx_ArrayPush');                                                 1000434
   448+     //Destination. Retrive from Locate()                                                                           1000435
   449+     pDestArray     Pointer    value;                                                                               1000436
   450+     //source node to append                                                                                        1000437
   451+     pSourceNode    Pointer    value options(*string);                                                              1000438
   452+     //0=(Dft) Unlink and move, 1=copy a clone                                                                      1000439
   453+     copy           Uns(5)     value options(*nopass);                                                              1000440
   454+   End-PR;                                                                                                          1000441
   455+                                                                                                                    1000442
   456+   //Following constants used by json_ArrayPush:copy                                                                1000443
   457+   Dcl-C json_MOVE_UNLINK const(0);                                                                                 1000444
   458+   Dcl-C json_COPY_CLONE const(1);                                                                                  1000445
   459+                                                                                                                    1000446
   460+   //returns the new node added to the end of                                                                       1000447
   461+   Dcl-PR json_ArrayAppend Pointer extproc(*CWIDEN :'jx_ArrayAppend');                                              1000448
   462+     //Destination. Retrive from Locate()                                                                           1000449
   463+     pDestArray     Pointer    value;                                                                               1000450
   464+     //source node to append                                                                                        1000451
   465+     pSourceNode    Pointer    value options(*string);                                                              1000452
   466+     //0=(Dft) Unlink and move, 1=copy a clone                                                                      1000453
   467+     copy           Uns(5)     value options(*nopass);                                                              1000454
   468+   End-PR;                                                                                                          1000455
   469+                                                                                                                    1000456
   470+   //returns the new array fro source array                                                                         1000457
   471+   Dcl-PR json_ArraySlice Pointer extproc(*CWIDEN : 'jx_ArraySlice' );                                              1000458
   472+     //source node or array string                                                                                  1000459
   473+     pSourceNode    Pointer    value options(*string);                                                              1000460
   474+     //From entry ( 1=First)                                                                                        1000461
   475+     from           Int(10)    value;                                                                               1000462
   476+     //To and includ   (-1 = Until end)                                                                             1000463
   477+     to             Int(10)    value;                                                                               1000464
   478+     //0=(Dft) Unlink and move, 1=copy a clone                                                                      1000465
   479+     copy           Uns(5)     value options(*nopass);                                                              1000466
   480+   End-PR;                                                                                                          1000467
   481+                                                                                                                    1000468
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     14
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   482+   //returns the new node added to the end of                                                                       1000469
   483+   Dcl-PR json_ArraySort Pointer extproc(*CWIDEN : 'jx_ArraySort');                                                 1000470
   484+     //Destination. Retrive from Locate()                                                                           1000471
   485+     pArray         Pointer    value;                                                                               1000472
   486+     //nodenames if any in subobject to comapre                                                                     1000473
   487+     pkeyNames      Pointer    value options(*string) ;                                                             1000474
   488+     //0=(Dft) use json numerics, 1=Use locale                                                                      1000475
   489+     options        uns(5)     value options(*nopass);                                                              1000476
   490+   End-PR;                                                                                                          1000477
   491+                                                                                                                    1000478
   492+   Dcl-C json_USE_LOCALE const(1);                                                                                  1000479
   493+                                                                                                                    1000480
   494+   //returns the first node with expr value                                                                         1000481
   495+   Dcl-PR json_LookupValue Pointer extproc(*CWIDEN : 'jx_lookupValue');                                             1000482
   496+     //Array/ obj to search                                                                                         1000483
   497+     pArray         Pointer    value;                                                                               1000484
   498+     //What to search for                                                                                           1000485
   499+     expr           Pointer    value options(*string);                                                              1000486
   500+     //0=(Dft) Same case, 1=ignore case                                                                             1000487
   501+     ignoreCase     Uns(5)     value options(*nopass);                                                              1000488
   502+   End-PR;                                                                                                          1000489
   503+                                                                                                                    1000490
   504+   //Following constants used by json_LookupValue:ignoreCase                                                        1000491
   505+   Dcl-C json_SAME_CASE const(0);                                                                                   1000492
   506+   Dcl-C json_IGNORE_CASE const(1);                                                                                 1000493
   507+                                                                                                                    1000494
   508+   //returns numer of element in array or obj                                                                       1000495
   509+   Dcl-PR json_GetLength Int(10) extproc(*CWIDEN : 'jx_getLength'  );                                               1000496
   510+     //Array to count length                                                                                        1000497
   511+     pArray         Pointer    value;                                                                               1000498
   512+   End-PR;                                                                                                          1000499
   513+                                                                                                                    1000500
   514+   //returns the new node                                                                                           1000501
   515+   Dcl-PR json_Merge Pointer extproc(*CWIDEN : 'jx_NodeMerge');                                                     1000502
   516+     //Destination. Retrive from Locate()                                                                           1000503
   517+     pDestNode      Pointer    value;                                                                               1000504
   518+     //Source tree  Retrive from Locate()                                                                           1000505
   519+     pSourceNode    Pointer    value;                                                                               1000506
   520+     //Optional new type                                                                                            1000507
   521+     Type           Uns(5)     value options(*nopass);                                                              1000508
   522+   End-PR;                                                                                                          1000509
   523+                                                                                                                    1000510
   524+   //Following constants used by json_Merge:Type                                                                    1000511
   525+   Dcl-C json_DONTREPLACE const(0);                                                                                 1000512
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     15
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   526+   Dcl-C json_REPLACE const(1);                                                                                     1000513
   527+                                                                                                                    1000514
   528+   //returns the new node                                                                                           1000515
   529+   Dcl-PR json_MergeObjects Pointer extproc(*CWIDEN : 'jx_MergeObjects');                                           1000516
   530+     //Destination. Retrive from Locate()                                                                           1000517
   531+     pDestObj       Pointer    value;                                                                               1000518
   532+     //Source tree  Retrive from Locate()                                                                           1000519
   533+     pSourceObj     Pointer    value;                                                                               1000520
   534+     //JX_DONTREPLACE or json_OBJREPLACE                                                                            1000521
   535+     Type           Uns(5)     value;                                                                               1000522
   536+   End-PR;                                                                                                          1000523
   537+                                                                                                                    1000524
   538+   //returns the source node                                                                                        1000525
   539+   Dcl-PR json_MoveObjectInto Pointer extproc(*CWIDEN : 'jx_NodeMoveInto');                                         1000526
   540+     //Destination. Retrive from Locate()                                                                           1000527
   541+     pDestObj       Pointer    value;                                                                               1000528
   542+     Name           Pointer    value options(*string);                                                              1000529
   543+     //Source tree  Retrive from Locate()                                                                           1000530
   544+     pSourceObj     Pointer    value;                                                                               1000531
   545+   End-PR;                                                                                                          1000532
   546+                                                                                                                    1000533
   547+   Dcl-PR json_Dump  extproc(*CWIDEN : 'jx_Dump');                                                                  1000534
   548+     //Pointer to tree                                                                                              1000535
   549+     pNode          Pointer    value;                                                                               1000536
   550+   End-PR;                                                                                                          1000537
   551+                                                                                                                    1000538
   552+                                                                                                                    1000539
   553+   Dcl-PR json_CloneFormat  extproc(*CWIDEN : 'jx_CloneFormat');                                                    1000540
   554+     //Pointer to tree to receive format                                                                            1000541
   555+     pNode          Pointer    value;                                                                               1000542
   556+     //node ptr or path with right formating                                                                        1000543
   557+     pCloneFrom     Pointer    value options(*string);                                                              1000544
   558+   End-PR;                                                                                                          1000545
   559+                                                                                                                    1000546
   560+   //**  JSON renderes ***                                                                                          1000547
   561+   Dcl-PR json_WriteJsonStmf  extproc(*CWIDEN : 'jx_WriteJsonStmf');                                                1000548
   562+     //node. Retrive from Locate()                                                                                  1000549
   563+     pNode          Pointer    value;                                                                               1000550
   564+     //Name of output stream file                                                                                   1000551
   565+     FileName       Pointer    value options(*string);                                                              1000552
   566+     //Ccsid of output file                                                                                         1000553
   567+     Ccsid          Int(10)    value;                                                                               1000554
   568+     Trim           Ind        value;                                                                               1000555
   569+     //Extra options                                                                                                1000556
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     16
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   570+     Options        Pointer    value options(*string:*nopass);                                                      1000557
   571+   End-PR;                                                                                                          1000558
   572+                                                                                                                    1000559
   573+   Dcl-PR json_AsJsonText Varchar(32767)                                                                            1000560
   574+                        extproc(*CWIDEN : 'jx_AsJsonText');                                                         1000561
   575+     //node. Retrive from Locate()                                                                                  1000562
   576+     pNode          Pointer    value;                                                                               1000563
   577+   End-PR;                                                                                                          1000564
   578+                                                                                                                    1000565
   579+   Dcl-PR json_AsJsonTextMem Uns(10)                                                                                1000566
   580+                           extproc(*CWIDEN : 'jx_AsJsonTextMem');                                                   1000567
   581+     //node. Retrive from Locate()                                                                                  1000568
   582+     pNode          Pointer    value;                                                                               1000569
   583+     //pointer to any memory buffer                                                                                 1000570
   584+     pBuffer        Pointer    value;                                                                               1000571
   585+     //Max number of bytes in buffer %size()                                                                        1000572
   586+     maxSize        Uns(10)    value options(*nopass);                                                              1000573
   587+   End-PR;                                                                                                          1000574
   588+                                                                                                                    1000575
   589+   //**  XML  renderes ***                                                                                          1000576
   590+   Dcl-PR json_WriteXmlStmf  extproc(*CWIDEN : 'jx_WriteXmlStmf');                                                  1000577
   591+     //node. Retrive from Locate()                                                                                  1000578
   592+     pNode          Pointer    value;                                                                               1000579
   593+     //Name of output stream file                                                                                   1000580
   594+     FileName       Pointer    value options(*string);                                                              1000581
   595+     //Ccsid of output file                                                                                         1000582
   596+     Ccsid          Int(10)    value;                                                                               1000583
   597+     Trim           Ind        value;                                                                               1000584
   598+     //Extra options                                                                                                1000585
   599+     Options        Pointer    value options(*string:*nopass);                                                      1000586
   600+   End-PR;                                                                                                          1000587
   601+                                                                                                                    1000588
   602+   Dcl-PR json_AsXmlText Varchar(32767) extproc(*CWIDEN : 'jx_AsXmlText');                                          1000589
   603+     //node. Retrive from Locate()                                                                                  1000590
   604+     pNode          Pointer    value;                                                                               1000591
   605+   End-PR;                                                                                                          1000592
   606+                                                                                                                    1000593
   607+   Dcl-PR json_AsXmlTextMem Uns(10) extproc(*CWIDEN : 'jx_AsXmlTextMem');                                           1000594
   608+     //node. Retrive from Locate()                                                                                  1000595
   609+     pNode          Pointer    value;                                                                               1000596
   610+     //pointer to any memory buffer                                                                                 1000597
   611+     pBuffer        Pointer    value;                                                                               1000598
   612+   End-PR;                                                                                                          1000599
   613+                                                                                                                    1000600
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     17
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   614+   // Return a streamer object to be used in own serialisers                                                        1000601
   615+   Dcl-PR json_Stream pointer extproc(*CWIDEN : 'jx_Stream');                                                       1000602
   616+     //node. Retrive from Locate()                                                                                  1000603
   617+     pNode          Pointer    value;                                                                               1000604
   618+   End-PR;                                                                                                          1000605
   619+                                                                                                                    1000606
   620+   //**  CSV  renderes ***                                                                                          1000607
   621+   Dcl-PR json_WriteCsvStmf  extproc(*CWIDEN : 'jx_WriteCsvStmf');                                                  1000608
   622+     //node. Retrive from Locate()                                                                                  1000609
   623+     pNode          Pointer    value;                                                                               1000610
   624+     //Name of output stream file                                                                                   1000611
   625+     FileName       Pointer    value options(*string);                                                              1000612
   626+     //Ccsid of output file                                                                                         1000613
   627+     Ccsid          Int(10)    value;                                                                               1000614
   628+     //*ON=Remove inter blanks                                                                                      1000615
   629+     Trim           Ind        value;                                                                               1000616
   630+     //Options: ';.' for separator and dec                                                                          1000617
   631+     Options        Pointer    value options(*string:*nopass);                                                      1000618
   632+   End-PR;                                                                                                          1000619
   633+                                                                                                                    1000620
   634+                                                                                                                    1000621
   635+   Dcl-DS json_DelimiterDS  based(prototype_only) qualified;                                                        1000622
   636+     Slash          Char(1);                                                                                        1000623
   637+     BackSlash      Char(1);                                                                                        1000624
   638+     Masterspace    Char(1);                                                                                        1000625
   639+     BraBeg         Char(1);                                                                                        1000626
   640+     BraEnd         Char(1);                                                                                        1000627
   641+     Blank          Char(1);                                                                                        1000628
   642+     Dot            Char(1);                                                                                        1000629
   643+     CurBeg         Char(1);                                                                                        1000630
   644+     CurEnd         Char(1);                                                                                        1000631
   645+     Apos           Char(1);                                                                                        1000632
   646+     Quot           Char(1);                                                                                        1000633
   647+   End-DS;                                                                                                          1000634
   648+                                                                                                                    1000635
   649+   //Iterators: First use the set the use forEach                                                                   1000636
   650+   Dcl-DS json_Iterator  based(prototype_only) qualified;                                                           1000637
   651+     root           Pointer;                                                                                        1000638
   652+     this           Pointer;                                                                                        1000639
   653+     isList         Ind;                                                                                            1000640
   654+     isFirst        Ind;                                                                                            1000641
   655+     isLast         Ind;                                                                                            1000642
   656+     isRecursive    Ind;                                                                                            1000643
   657+     comma          Varchar(1);                                                                                     1000644
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     18
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   658+     count          Int(10);                                                                                        1000645
   659+     length         Int(10);                                                                                        1000646
   660+     size           Int(10);                                                                                        1000647
   661+     //Pointer to temp array of elms                                                                                1000648
   662+     listArr        Pointer;                                                                                        1000649
   663+     //Set  this to *ON to teminate loop                                                                            1000650
   664+     break          Ind;                                                                                            1000651
   665+     filler         Char(64);                                                                                       1000652
   666+   End-DS;                                                                                                          1000653
   667+                                                                                                                    1000654
   668+   Dcl-PR json_setIterator  likeds( json_Iterator)                                                                  1000655
   669+                          extproc(*CWIDEN : 'jx_SetIterator');                                                      1000656
   670+     //node. Retrive from Locate()                                                                                  1000657
   671+     pNode          Pointer    value;                                                                               1000658
   672+     //Optional - path to node                                                                                      1000659
   673+     path           Pointer    value options(*string:*nopass);                                                      1000660
   674+   End-PR;                                                                                                          1000661
   675+                                                                                                                    1000662
   676+   Dcl-PR json_setRecursiveIterator  likeds( json_Iterator)                                                         1000663
   677+                                   extproc(*CWIDEN :                                                                1000664
   678+                                   'jx_SetRecursiveIterator');                                                      1000665
   679+     //node. Retrive from Locate()                                                                                  1000666
   680+     pNode          Pointer    value;                                                                               1000667
   681+     //Optional - path to node                                                                                      1000668
   682+     path           Pointer    value options(*string:*nopass);                                                      1000669
   683+   End-PR;                                                                                                          1000670
   684+                                                                                                                    1000671
   685+   //Iterator Structure                                                                                             1000672
   686+   Dcl-PR json_forEach Ind extproc(*CWIDEN : 'jx_ForEach');                                                         1000673
   687+     iterator                  likeds( json_Iterator);                                                              1000674
   688+   End-PR;                                                                                                          1000675
   689+                                                                                                                    1000676
   690+   //For XML attributes                                                                                             1000677
   691+   Dcl-PR json_GetNodeAttrValue Varchar(32767)                                                                      1000678
   692+                              extproc(*CWIDEN : 'jx_GetNodeAttrValueVC');                                           1000679
   693+     //Pointer to exsiting element                                                                                  1000680
   694+     pNode          Pointer    value;                                                                               1000681
   695+     //Attribute Name                                                                                               1000682
   696+     AttrName       Pointer    value options(*string);                                                              1000683
   697+     //If not found - default value                                                                                 1000684
   698+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000685
   699+   End-PR;                                                                                                          1000686
   700+                                                                                                                    1000687
   701+   Dcl-PR json_SetNodeAttrValue extproc(*CWIDEN : 'jx_SetNodeAttrValue');                                           1000688
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     19
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   702+     //Pointer to exsiting element                                                                                  1000689
   703+     pNode          Pointer    value;                                                                               1000690
   704+     //Attribute name                                                                                               1000691
   705+     AttrName       Pointer    value options(*string);                                                              1000692
   706+     //New value                                                                                                    1000693
   707+     Value          Pointer    value options(*string);                                                              1000694
   708+   End-PR;                                                                                                          1000695
   709+                                                                                                                    1000696
   710+   Dcl-PR json_GetAttrValue Varchar(32767)                                                                          1000697
   711+                          extproc(*CWIDEN : 'jx_GetAttrValueVC');                                                   1000698
   712+     //Pointer Attribute                                                                                            1000699
   713+     pAttr          Pointer    value;                                                                               1000700
   714+     //If not found - default value                                                                                 1000701
   715+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000702
   716+   End-PR;                                                                                                          1000703
   717+                                                                                                                    1000704
   718+   Dcl-PR json_SetAttrValue extproc(*CWIDEN : 'jx_SetAttrValue');                                                   1000705
   719+     //Pointer Attribute                                                                                            1000706
   720+     pAttr          Pointer    value;                                                                               1000707
   721+     //New value                                                                                                    1000708
   722+     AttrName       Pointer    value options(*string);                                                              1000709
   723+     //Default value                                                                                                1000710
   724+     Value          Pointer    value options(*string);                                                              1000711
   725+   End-PR;                                                                                                          1000712
   726+                                                                                                                    1000713
   727+   //Returns pointer to attribute list                                                                              1000714
   728+   Dcl-PR json_GetAttrFirst Pointer extproc(*CWIDEN : 'jx_GetAttrFirst');                                           1000715
   729+     //Pointer to element                                                                                           1000716
   730+     pElem          Pointer    value;                                                                               1000717
   731+   End-PR;                                                                                                          1000718
   732+                                                                                                                    1000719
   733+   //Returns pointer to attribute list                                                                              1000720
   734+   Dcl-PR json_GetAttrNext Pointer extproc(*CWIDEN : 'jx_GetAttrNext');                                             1000721
   735+     //Pointer to attribute list                                                                                    1000722
   736+     pAttr          Pointer    value;                                                                               1000723
   737+   End-PR;                                                                                                          1000724
   738+                                                                                                                    1000725
   739+   Dcl-PR json_GetAttrName Varchar(32767)                                                                           1000726
   740+                         extproc(*CWIDEN : 'jx_GetAttrNameVC');                                                     1000727
   741+     //Pointer to attribute list                                                                                    1000728
   742+     pAttr          Pointer    value;                                                                               1000729
   743+   End-PR;                                                                                                          1000730
   744+                                                                                                                    1000731
   745+ // Clear the contents of an array or object / delete all children                                                  1000732
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     20
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   746+   Dcl-PR json_Clear  extproc(*CWIDEN : 'jx_Clear');                                                                1000733
   747+     pNode          Pointer    value; //Pointer to tree node                                                        1000734
   748+   End-PR;                                                                                                          1000735
   749+                                                                                                                    1000736
   750+ // Close all nodes in this tree - also parent and siblings                                                         1000737
   751+   Dcl-PR json_Close  extproc(*CWIDEN : 'jx_Close');                                                                1000738
   752+     //Pointer to tree node                                                                                         1000739
   753+     pNode          Pointer  ;                                                                                      1000740
   754+   End-PR;                                                                                                          1000741
   755+ // Detect if you have a memry leak: call this when you have closed everything at i will return                     1000742
   756+   Dcl-PR json_MemLeak Ind extproc(*CWIDEN : 'jx_MemLeak');                                                         1000743
   757+   End-PR;                                                                                                          1000744
   758+                                                                                                                    1000745
   759+ // Print memory report                                                                                             1000746
   760+   Dcl-PR json_MemStat  extproc(*CWIDEN : 'jx_MemStat');                                                            1000747
   761+   End-PR;                                                                                                          1000748
   762+                                                                                                                    1000749
   763+ // retune number of bytest used                                                                                    1000750
   764+   Dcl-PR json_MemUse Uns(20) extproc(*CWIDEN : 'jx_MemUse');                                                       1000751
   765+   End-PR;                                                                                                          1000752
   766+                                                                                                                    1000753
   767+ // Return a memory segment pointer, and build a scope where JSON/XML will be created                               1000754
   768+   Dcl-PR json_SegmentSelectNo Pointer                                                                              1000755
   769+                             extproc(*CWIDEN : 'jx_SegmentSelectNo');                                               1000756
   770+     SegmentIndex   Int(10)    value;                                                                               1000757
   771+   End-PR;                                                                                                          1000758
   772+                                                                                                                    1000759
   773+ //  Delete the segment and all JSON/XML nodes build while segment scope was active                                 1000760
   774+   Dcl-PR json_SegmentDispose  extproc(*CWIDEN : 'jx_SegmentDispose');                                              1000761
   775+     segmentPtr     Pointer    value;                                                                               1000762
   776+   End-PR;                                                                                                          1000763
   777+                                                                                                                    1000764
   778+ // Maintain at list of index numbers to database CLOB/BLOB fields since pointers can not be sh                     1000765
   779+   //Returns *ON if found                                                                                           1000766
   780+   Dcl-PR json_mapIx Ind extproc(*CWIDEN:'jx_MapIx' );                                                              1000767
   781+     //pointer to node pointer                                                                                      1000768
   782+     ppNode         Pointer;                                                                                        1000769
   783+     //index of pointer                                                                                             1000770
   784+     Index          Uns(10)    value;                                                                               1000771
   785+   End-PR;                                                                                                          1000772
   786+                                                                                                                    1000773
   787+   //------------------------------------------------------------------------                                       1000774
   788+   //SQL interface:                                                                                                 1000775
   789+   //Note: When SQL functions returns *NULL, then use  the json_Message() to re                                     1000776
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     21
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   790+   //------------------------------------------------------------------------                                       1000777
   791+                                                                                                                    1000778
   792+ // If options need - then it has to be first call made.                                                            1000779
   793+ // NOTE: If a pConnection pointer is provided, it will be updated with the conection                               1000780
   794+   Dcl-PR json_sqlSetOptions  extproc(*CWIDEN: 'jx_sqlSetOptions');                                                 1000781
   795+     //json object with options ( see sample)                                                                       1000782
   796+     parms          Pointer    value options(*string:*nopass);                                                      1000783
   797+   End-PR;                                                                                                          1000784
   798+                                                                                                                    1000785
   799+ // returns a object node with one resulting row for the SQL statment                                               1000786
   800+   //Returns one SQL row as jx Obejct                                                                               1000787
   801+   Dcl-PR json_sqlResultRow Pointer extproc(*CWIDEN: 'jx_sqlResultRow');                                            1000788
   802+     //SQL statement to run                                                                                         1000789
   803+     sqlStmt        Pointer    value options(*string);                                                              1000790
   804+     //json object template                                                                                         1000791
   805+     parms          Pointer    value options(*string:*nopass);                                                      1000792
   806+   End-PR;                                                                                                          1000793
   807+                                                                                                                    1000794
   808+ // returns an array (or object with array) of resulting rows for the SQL statment                                  1000795
   809+   //Returns SQL rows as jx Obejct                                                                                  1000796
   810+   Dcl-PR json_sqlResultSet Pointer extproc(*CWIDEN: 'jx_sqlResultSet');                                            1000797
   811+     //SQL statement to run                                                                                         1000798
   812+     sqlStmt        Pointer    value options(*string);                                                              1000799
   813+     //From row; 1=First                                                                                            1000800
   814+     start          Int(10)    value options(*nopass);                                                              1000801
   815+     //max number of rows; json_ALLROWS=all                                                                         1000802
   816+     limit          Int(10)    value options(*nopass);                                                              1000803
   817+     //resultset format:                                                                                            1000804
   818+     format         Int(10)    value options(*nopass);                                                              1000805
   819+     //json object template                                                                                         1000806
   820+     parms          Pointer    value options(*string:*nopass);                                                      1000807
   821+   End-PR;                                                                                                          1000808
   822+                                                                                                                    1000809
   823+                                                                                                                    1000810
   824+   Dcl-C json_ALLROWS const(-1);                                                                                    1000811
   825+                                                                                                                    1000812
   826+   //Following constants used by json_sqlResultSet:format                                                           1000813
   827+   //+ An array with each row as an object                                                                          1000814
   828+   Dcl-C json_ROWARRAY const(0);                                                                                    1000815
   829+   //+ Metaobject: rows, fields                                                                                     1000816
   830+   Dcl-C json_META    const(1);                                                                                     1000817
   831+   //+ Columns info                                                                                                 1000818
   832+   Dcl-C json_FIELDS  const(2);                                                                                     1000819
   833+   //+ Count all rows in the resultset                                                                              1000820
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     22
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   834+   // ( Pricy so awoid it !! )                                                                                      1000821
   835+   Dcl-C json_TOTALROWS const(4);                                                                                   1000822
   836+   //+ Uppercase column names                                                                                       1000823
   837+   Dcl-C json_UPPERCASE const(8);                                                                                   1000824
   838+                                                                                                                    1000825
   839+   //+ Appoximate number of rows..                                                                                  1000826
   840+   //  ( unpresise but cheap !! prefered  )                                                                         1000827
   841+   Dcl-C json_APPROXIMATE_TOTALROWS const(16);                                                                      1000828
   842+                                                                                                                    1000829
   843+                                                                                                                    1000830
   844+                                                                                                                    1000831
   845+ // SQL cursor processing                                                                                           1000832
   846+   //Returns handle to sql statement                                                                                1000833
   847+   Dcl-PR json_sqlOpen Pointer extproc(*CWIDEN:'jx_sqlOpen'  );                                                     1000834
   848+     //SQL statement to run                                                                                         1000835
   849+     sqlStmt        Pointer    value options(*string);                                                              1000836
   850+     //json object template                                                                                         1000837
   851+     parms          Pointer    value options(*string:*nopass);                                                      1000838
   852+   End-PR;                                                                                                          1000839
   853+                                                                                                                    1000840
   854+ // Fetch next from from that open sql handle, starting from rowNumer. 1=First row                                  1000841
   855+   //Returns a row object (or *NULL if EOF)                                                                         1000842
   856+   Dcl-PR json_sqlFetchRelative Pointer                                                                             1000843
   857+                              extproc(*CWIDEN: 'jx_sqlFetchRelative');                                              1000844
   858+     //sql statement handle ( from sqlOpen)                                                                         1000845
   859+     pSqlHndl       Pointer    value;                                                                               1000846
   860+     //row from where to start 1=First                                                                              1000847
   861+     fromRow        Int(10)    value;                                                                               1000848
   862+   End-PR;                                                                                                          1000849
   863+                                                                                                                    1000850
   864+ // Fetch next from from that open sql handle                                                                       1000851
   865+   //Returns a row object (or *NULL if EOF)                                                                         1000852
   866+   Dcl-PR json_sqlFetchNext Pointer extproc(*CWIDEN:'jx_sqlFetchNext');                                             1000853
   867+     //sql statement handle ( from sqlOpen)                                                                         1000854
   868+     pSqlHndl       Pointer    value;                                                                               1000855
   869+   End-PR;                                                                                                          1000856
   870+                                                                                                                    1000857
   871+ // Number of columns in result set ( -1 if error)                                                                  1000858
   872+   //Returns number of columns                                                                                      1000859
   873+   Dcl-PR json_sqlColumns Int(10) extproc(*CWIDEN:'jx_sqlColumns');                                                 1000860
   874+     //sql statement handle ( from sqlOpen)                                                                         1000861
   875+     pSqlHndl       Pointer    value;                                                                               1000862
   876+   End-PR;                                                                                                          1000863
   877+                                                                                                                    1000864
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     23
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   878+ // Number of rows  in result set ( -1 if error)                                                                    1000865
   879+ // Note: This will run a hidden "select count(*)" which might be a little pricy                                    1000866
   880+   //Returns number of rows                                                                                         1000867
   881+   Dcl-PR json_sqlRows Int(10) extproc(*CWIDEN:'jx_sqlRows');                                                       1000868
   882+     //sql statement handle ( from sqlOpen)                                                                         1000869
   883+     pSqlHndl       Pointer    value;                                                                               1000870
   884+   End-PR;                                                                                                          1000871
   885+                                                                                                                    1000872
   886+ // Always colse the cursor after use, to release resources                                                         1000873
   887+   Dcl-PR json_sqlClose  extproc(*CWIDEN:'jx_sqlClose');                                                            1000874
   888+     //sql statement handle ( from sqlOpen)                                                                         1000875
   889+     pSqlHndl       Pointer;                                                                                        1000876
   890+   End-PR;                                                                                                          1000877
   891+                                                                                                                    1000878
   892+ // Execute any SQL statement not involving a cursor                                                                1000879
   893+   //Returns *ON if error                                                                                           1000880
   894+   Dcl-PR json_sqlExec Ind extproc(*CWIDEN:'jx_sqlExec'  );                                                         1000881
   895+     //SQL statement to run (template)                                                                              1000882
   896+     sqlStmt        Pointer    value options(*string);                                                              1000883
   897+     //json object template data                                                                                    1000884
   898+     parms          Pointer    value options(*string:*nopass);                                                      1000885
   899+   End-PR;                                                                                                          1000886
   900+                                                                                                                    1000887
   901+ // Execute an update table where the row is defined as a json object                                               1000888
   902+   //Returns *ON if error                                                                                           1000889
   903+   Dcl-PR json_sqlUpdate Ind extproc(*CWIDEN:'jx_sqlUpdate');                                                       1000890
   904+     //table name                                                                                                   1000891
   905+     table          Pointer    value options(*string);                                                              1000892
   906+     //json object: {a:123,b:"value"}                                                                               1000893
   907+     row            Pointer    value options(*string);                                                              1000894
   908+     //where clause : 'where myKey=$key'                                                                            1000895
   909+     where          Pointer    value options(*string:*nopass);                                                      1000896
   910+     //where parameters: { key:777}                                                                                 1000897
   911+     whereParms     Pointer    value options(*string:*nopass);                                                      1000898
   912+   End-PR;                                                                                                          1000899
   913+                                                                                                                    1000900
   914+   //Returns *ON if error                                                                                           1000901
   915+   Dcl-PR json_sqlInsert Ind extproc(*CWIDEN:'jx_sqlInsert');                                                       1000902
   916+     //table name                                                                                                   1000903
   917+     table          Pointer    value options(*string);                                                              1000904
   918+     //json object: {a:123,b:"value"}                                                                               1000905
   919+     row            Pointer    value options(*string);                                                              1000906
   920+     //extra parms                                                                                                  1000907
   921+     parms          Pointer    value options(*string:*nopass);                                                      1000908
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     24
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   922+   End-PR;                                                                                                          1000909
   923+                                                                                                                    1000910
   924+   //Returns *ON if error                                                                                           1000911
   925+   Dcl-PR json_sqlUpsert Ind extproc(*CWIDEN:'jx_sqlUpsert');                                                       1000912
   926+     //table name                                                                                                   1000913
   927+     table          Pointer    value options(*string);                                                              1000914
   928+     //json object: {a:123,b:"value"}                                                                               1000915
   929+     row            Pointer    value options(*string);                                                              1000916
   930+     //where clause : 'where myKey=$key'                                                                            1000917
   931+     where          Pointer    value options(*string:*nopass);                                                      1000918
   932+     //where parameters: { key:777}                                                                                 1000919
   933+     whereParms     Pointer    value options(*string:*nopass);                                                      1000920
   934+   End-PR;                                                                                                          1000921
   935+                                                                                                                    1000922
   936+   //Returns id of last insert                                                                                      1000923
   937+   Dcl-PR json_sqlGetInsertId Int(10) extproc(*CWIDEN:'jx_sqlGetInsertId');                                         1000924
   938+   End-PR;                                                                                                          1000925
   939+                                                                                                                    1000926
   940+   //Returns array of column info                                                                                   1000927
   941+   Dcl-PR json_sqlGetMeta Pointer extproc(*CWIDEN:'jx_sqlGetMeta');                                                 1000928
   942+     sqlstmt        Pointer    value options(*string);                                                              1000929
   943+   End-PR;                                                                                                          1000930
   944+                                                                                                                    1000931
   945+ // Return pointer to database connection. No options => will be default local database                             1000932
   946+   Dcl-PR json_sqlConnect Pointer extproc(*CWIDEN: 'jx_sqlConnect');                                                1000933
   947+     //json object or string with options                                                                           1000934
   948+     parms          Pointer    value options(*string:*nopass);                                                      1000935
   949+   End-PR;                                                                                                          1000936
   950+                                                                                                                    1000937
   951+ // Return pointer to database connection. No options => will be default local database                             1000938
   952+   Dcl-PR json_sqlDisconnect  extproc(*CWIDEN: 'jx_sqlDisconnect');                                                 1000939
   953+   End-PR;                                                                                                          1000940
   954+                                                                                                                    1000941
   955+ // Return sql code for previous statement                                                                          1000942
   956+   Dcl-PR json_sqlCode Int(10) extproc(*CWIDEN: 'jx_sqlCode');                                                      1000943
   957+   End-PR;                                                                                                          1000944
   958+                                                                                                                    1000945
   959+ //Returns a JSON object from a REST call                                                                           1000946
   960+   Dcl-PR json_httpRequest Pointer extproc(*CWIDEN:'jx_httpRequest');                                               1000947
   961+     //Full URL to the resource                                                                                     1000948
   962+     url            Pointer    value options(*string);                                                              1000949
   963+     //json object or string                                                                                        1000950
   964+     pReqNode       Pointer    value options(*string:*nopass);                                                      1000951
   965+     //extra CURL options                                                                                           1000952
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     25
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
   966+     options        Pointer    value options(*string:*nopass);                                                      1000953
   967+   End-PR;                                                                                                          1000954
   968+                                                                                                                    1000955
   969+ // when the dataarea SQLTRACE is set, your SQL statements                                                          1000956
   970+ // are logged into SQLTRACE table.                                                                                 1000957
   971+ // you can supply an extr eye-catch wariable :trcid                                                                1000958
   972+   Dcl-PR json_traceSetId  extproc(*CWIDEN : 'jx_traceSetId');                                                      1000959
   973+     traceId        Int(20)    value; //Ccsid of inpur file                                                         1000960
   974+   End-PR;                                                                                                          1000961
   975+                                                                                                                    1000962
   976+ // -------------------------------------------------------------------------------------------                     1000963
   977+ // Depricated and renamed functions :                                                                              1000964
   978+ // -------------------------------------------------------------------------------------------                     1000965
   979+ // Depricated - use  json_GetValueStr                                                                              1000966
   980+   Dcl-PR json_GetValue Varchar(32767) extproc(*CWIDEN : 'jx_GetValueVC');                                          1000967
   981+     //Pointer to node                                                                                              1000968
   982+     pNode          Pointer    value;                                                                               1000969
   983+     //If not found - default value                                                                                 1000970
   984+     Expression     Pointer    value options(*string:*nopass);                                                      1000971
   985+     //If not found - default value                                                                                 1000972
   986+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1000973
   987+   End-PR;                                                                                                          1000974
   988+                                                                                                                    1000975
   989+ // Depricated - use  json_NodeCopy                                                                                 1000976
   990+   Dcl-PR json_Copy extproc(*CWIDEN : 'jx_NodeCopy');                                                               1000977
   991+     //element. Retrive from Locate()                                                                               1000978
   992+     pRootNode      Pointer    value;                                                                               1000979
   993+     //element. Retrive from Locate()                                                                               1000980
   994+     pNewChild      Pointer    value;                                                                               1000981
   995+     //Reference location to where it arrive                                                                        1000982
   996+     RefLocation    Int(10)    value;                                                                               1000983
   997+   End-PR;                                                                                                          1000984
   998+                                                                                                                    1000985
   999+   Dcl-PR json_ElementCopy extproc(*CWIDEN : 'jx_NodeCopy');                                                        1000986
  1000+     //element. Retrive from Locate()                                                                               1000987
  1001+     pRootNode      Pointer    value;                                                                               1000988
  1002+     //element. Retrive from Locate()                                                                               1000989
  1003+     pNewChild      Pointer    value;                                                                               1000990
  1004+     //Reference location to where it arrive                                                                        1000991
  1005+     RefLocation    Int(10)    value;                                                                               1000992
  1006+   End-PR;                                                                                                          1000993
  1007+                                                                                                                    1000994
  1008+ // Depricated - use  json_NodeDelete                                                                               1000995
  1009+   Dcl-PR json_Delete extproc(*CWIDEN : 'jx_NodeDelete');                                                           1000996
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     26
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  1010+     //element. Retrive from Locate()                                                                               1000997
  1011+     pRootNode      Pointer    value;                                                                               1000998
  1012+   End-PR;                                                                                                          1000999
  1013+                                                                                                                    1001000
  1014+ // Depricated - use  json_NodeDelete                                                                               1001001
  1015+   Dcl-PR json_ElementDelete extproc(*CWIDEN : 'jx_NodeDelete');                                                    1001002
  1016+     //element. Retrive from Locate()                                                                               1001003
  1017+     pRootNode      Pointer    value;                                                                               1001004
  1018+   End-PR;                                                                                                          1001005
  1019+                                                                                                                    1001006
  1020+ // Depricated - use  json_AsJsonText                                                                               1001007
  1021+   Dcl-PR json_AsText Varchar(32767) extproc(*CWIDEN : 'jx_AsJsonText');                                            1001008
  1022+     //element. Retrive from Locate()                                                                               1001009
  1023+     pNode          Pointer    value;                                                                               1001010
  1024+   End-PR;                                                                                                          1001011
  1025+                                                                                                                    1001012
  1026+                                                                                                                    1001013
  1027+ // json_XpathValue   is depricated and replaced by: json_GetStr                                                    1001014
  1028+   Dcl-PR json_XpathValue Varchar(32767)                                                                            1001015
  1029+                        extproc(*CWIDEN : 'jx_GetValueVC');                                                         1001016
  1030+     //Pointer to tree                                                                                              1001017
  1031+     pNode          Pointer    value;                                                                               1001018
  1032+     //Locations expression to node                                                                                 1001019
  1033+     Expression     Pointer    value options(*string);                                                              1001020
  1034+     //If not found - default value                                                                                 1001021
  1035+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1001022
  1036+   End-PR;                                                                                                          1001023
  1037+                                                                                                                    1001024
  1038+ // json_XpathValueNum   is depricated and replaced by: json_GetNum                                                 1001025
  1039+   Dcl-PR json_XpathValueNum Packed(30:15)                                                                          1001026
  1040+                           extproc(*CWIDEN : 'jx_GetValueNum');                                                     1001027
  1041+     //Pointer to tree                                                                                              1001028
  1042+     pJsonCom       Pointer    value;                                                                               1001029
  1043+     //X-path locations to node or attributes                                                                       1001030
  1044+     Node           Pointer    value options(*string);                                                              1001031
  1045+     //If not found - default value                                                                                 1001032
  1046+     Defaultvalue   Packed(30:15) value options(*nopass);                                                           1001033
  1047+   End-PR;                                                                                                          1001034
  1048+                                                                                                                    1001035
  1049+ // Use - json_NodeType                                                                                             1001036
  1050+   Dcl-PR json_ElementType Int(5) extproc(*CWIDEN : 'jx_GetNodeType');                                              1001037
  1051+     //Pointer to tree to receive format                                                                            1001038
  1052+     pNode          Pointer    value;                                                                               1001039
  1053+   End-PR;                                                                                                          1001040
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     27
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  1054+                                                                                                                    1001041
  1055+ // Use json_NodeAdd                                                                                                1001042
  1056+   //returns the new element                                                                                        1001043
  1057+   Dcl-PR json_ElementAdd Pointer extproc(*CWIDEN : 'jx_NodeAdd');                                                  1001044
  1058+     //element. Retrive from Locate()                                                                               1001045
  1059+     pRootNode      Pointer    value;                                                                               1001046
  1060+     //Reference location to where it arrive                                                                        1001047
  1061+     RefLocation    Int(10)    value;                                                                               1001048
  1062+     //Name of element                                                                                              1001049
  1063+     Name           Pointer    value options(*string);                                                              1001050
  1064+     //Value of element                                                                                             1001051
  1065+     Value          Pointer    value options(*string);                                                              1001052
  1066+   End-PR;                                                                                                          1001053
  1067+                                                                                                                    1001054
  1068+ // Use json_GetNext                                                                                                1001055
  1069+   //Returns pointer to next sibling (elem)                                                                         1001056
  1070+   Dcl-PR json_GetElemNext Pointer extproc(*CWIDEN : 'jx_GetNodeNext');                                             1001057
  1071+     //Pointer to current element (elem)                                                                            1001058
  1072+     pElem          Pointer    value  ;                                                                             1001059
  1073+   End-PR;                                                                                                          1001060
  1074+                                                                                                                    1001061
  1075+ // use json_GetChild                                                                                               1001062
  1076+   //Returns pointer to next child (elem)                                                                           1001063
  1077+   Dcl-PR json_GetElemChild Pointer extproc(*CWIDEN : 'jx_GetNodeChild');                                           1001064
  1078+     //Pointer to current element (elem)                                                                            1001065
  1079+     pElem          Pointer    value;                                                                               1001066
  1080+   End-PR;                                                                                                          1001067
  1081+                                                                                                                    1001068
  1082+                                                                                                                    1001069
  1083+ // use get json_GetName                                                                                            1001070
  1084+   Dcl-PR json_getElemName Varchar(32767)                                                                           1001071
  1085+                         extproc(*CWIDEN : 'jx_GetNodeNameVC');                                                     1001072
  1086+     //Pointer to node                                                                                              1001073
  1087+     pNode          Pointer    value;                                                                               1001074
  1088+   End-PR;                                                                                                          1001075
  1089+                                                                                                                    1001076
  1090+ // use xml_GetValueStr                                                                                             1001077
  1091+   Dcl-PR json_GetElemValue Varchar(32767)                                                                          1001078
  1092+                          extproc(*CWIDEN : 'jx_GetNodeValueVC');                                                   1001079
  1093+     //Pointer to element                                                                                           1001080
  1094+     pElem          Pointer    value;                                                                               1001081
  1095+     //If not found - default value                                                                                 1001082
  1096+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1001083
  1097+   End-PR;                                                                                                          1001084
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     28
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  1098+                                                                                                                    1001085
  1099+  // use json_GetAttrValue                                                                                          1001086
  1100+   Dcl-PR json_GetAttr Varchar(32767)                                                                               1001087
  1101+                     extproc(*CWIDEN : 'jx_GetNodeAttrValueVC');                                                    1001088
  1102+     //Pointer to element                                                                                           1001089
  1103+     pNode          Pointer    value;                                                                               1001090
  1104+     //Attribute Name                                                                                               1001091
  1105+     AttrName       Pointer    value options(*string);                                                              1001092
  1106+     //If not found - default value                                                                                 1001093
  1107+     Defaultvalue   Pointer    value options(*string:*nopass);                                                      1001094
  1108+   End-PR;                                                                                                          1001095
  1109+                                                                                                                    1001096
  1110+ // has no effect any longer                                                                                        1001097
  1111+   //Set input and output CCSID                                                                                     1001098
  1112+   Dcl-PR json_setCcsid  extproc(*CWIDEN : 'jx_SetCcsid');                                                          1001099
  1113+     //Ccsid of inpur file                                                                                          1001100
  1114+     inputCCSID     Int(10)    value;                                                                               1001101
  1115+     //Ccsid of output file                                                                                         1001102
  1116+     outputCCSID    Int(10)    value;                                                                               1001103
  1117+   End-PR;                                                                                                          1001104
  1118+                                                                                                                    1001105
  1119+ // depricated - use setNum                                                                                         1001106
  1120+   Dcl-PR json_SetDec Pointer extproc(*CWIDEN: 'jx_SetDecByName');                                                  1001107
  1121+     //Pointer to json_ tree                                                                                        1001108
  1122+     pNode          Pointer    value;                                                                               1001109
  1123+     //X-path locations to node or attributes                                                                       1001110
  1124+     Expresion      Pointer    value options(*string);                                                              1001111
  1125+     //New value to set / pointer to object                                                                         1001112
  1126+     Value          Packed(30:15) value;                                                                            1001113
  1127+   End-PR;                                                                                                          1001114
  1128+                                                                                                                    1001115
  1129+ // Depricated in both JSON and XML - use  json_WriteJsonStmf /   json_WriteXmlStmf                                 1001116
  1130+ /if not defined(JSONXML_DEPRICATED)                                                                                1001117
  1131+ /define  JSONXML_DEPRICATED                                                                                        1001118
  1132+   Dcl-PR json_WriteStmf  extproc(*CWIDEN : 'jx_WriteJsonStmf');                                                    1001119
  1133+     //element. Retrive from Locate()                                                                               1001120
  1134+     pNode          Pointer    value;                                                                               1001121
  1135+     //Name of output stream file                                                                                   1001122
  1136+     FileName       Pointer    value options(*string);                                                              1001123
  1137+     //Ccsid of output file                                                                                         1001124
  1138+     Ccsid          Int(10)    value;                                                                               1001125
  1139+     Trim           Ind        value options(*nopass);                                                              1001126
  1140+   End-PR;                                                                                                          1001127
  1141+                                                                                                                    1001128
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     29
Line   <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Src Seq
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Id  Number
  1142+   Dcl-PR xml_WriteStmf  extproc(*CWIDEN : 'jx_WriteXmlStmf');                                                      1001129
  1143+     //element. Retrive from Locate()                                                                               1001130
  1144+     pNode          Pointer    value;                                                                               1001131
  1145+     //Name of output stream file                                                                                   1001132
  1146+     FileName       Pointer    value options(*string);                                                              1001133
  1147+     //Ccsid of output file                                                                                         1001134
  1148+     Ccsid          Int(10)    value;                                                                               1001135
  1149+     Trim           Ind        value options(*nopass);                                                              1001136
  1150+   End-PR;                                                                                                          1001137
  1151+ /endif                                                                                                             1001138
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1152                                                                                                                      000015
  1153 dcl-proc main;                                                                                                       000016
  1154                                                                                                                      000017
  1155     dcl-s  pInput    pointer;                                                                                        000018
  1156     dcl-s  pOutput       pointer;                                                                                    000019
  1157     dcl-s  url       varchar(1024);                                                                                  000020
  1158     dcl-s  text      char (50);                                                                                      000021
  1159     dcl-s  extraParms    varchar(4096);                                                                              000022
  1160     dcl-c  appkey        'ZiVLkVMPE7-ECxvEaJIbZ5nD4QS63bUM63ww-ZxXOi_w'; // <<< Put your applicaton                  000023
 ...   key here
  1161                                                                                                                      000024
  1162                                                                                                                      000025
  1163     // Setup the json object for watson service                                                                      000026
  1164  pInput  = json_newObject();                                                                                         000027
  1165  json_setStr(pInput : 'model_id' : 'en-es');                                                                         000028
  1166  json_setStr(pInput : 'text'     : 'Good afternoon my friends');                                                     000029
  1167                                                                                                                      000030
  1168  url = 'https://gateway.watsonplatform.net/language-translator/api/v3/translate?version=2018-05-01';                 000031
  1169                                                                                                                      000032
  1170     // do the Watson magic                                                                                           000033
  1171  extraParms = '-k --user apikey:' + appkey;                                                                          000034
  1172  pOutput = json_httpRequest (url: pInput : extraParms);                                                              000035
  1173                                                                                                                      000036
  1174  // Just debug the response                                                                                          000037
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     30
Line   <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Src Seq
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Id  Number
  1175  text = json_getStr(pOutput : 'translations[0].translation' : 'N/A');                                                000038
  1176  dsply text;                                                                                                         000039
  1177                                                                                                                      000040
  1178     // Done                                                                                                          000041
  1179     json_delete (pInput);                                                                                            000042
  1180     json_delete (pOutput);                                                                                           000043
  1181                                                                                                                      000044
  1182 end-proc;                                                                                                            000045
       * * * * *   E N D   O F   S O U R C E   * * * * *
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     31
          A d d i t i o n a l   D i a g n o s t i c   M e s s a g e s
 Msg id  Sv Number Seq     Message text
*RNF5409 00   1165 000028  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00   1166 000029  The prototyped call returns a value which is lost when
                           CALLP is used.
 * * * * *   E N D   O F   A D D I T I O N A L   D I A G N O S T I C   M E S S A G E S   * * * * *
                            / C o p y   M e m b e r s
Line   Src  RPG name   <-------- External name -------> CCSID  <- Last change ->
Number Id              Library    File       Member            Date     Time
    14    1 jsonparse+ ./.././headers/jsonparser.rpgle    819  26-10-18 15:18:47
         * * * * *   E N D   O F   / C O P Y   M E M B E R S   * * * * *
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     32
                          C r o s s   R e f e r e n c e
      File and Record References:
         File              Device             References (D=Defined)
           Record
         No references in the source.
      Global Field References:
         Field             Attributes         References (D=Defined M=Modified)
*RNF7031 JSON_AFTER_SIBLING...
                           CONST                 390D
*RNF7031 JSON_ALLOW_PRIMITIVES...
                           CONST                  74D
*RNF7031 JSON_ALLROWS      CONST                 824D
*RNF7031 JSON_APPROXIMATE_TOTALROWS...
                           CONST                 841D
*RNF7031 JSON_ARRAY        CONST                  57D
*RNF7031 JSON_ARRAYAPPEND  *(16)                 461D
                           PROTOTYPE
*RNF7031 JSON_ARRAYPUSH    *(16)                 447D
                           PROTOTYPE
*RNF7031 JSON_ARRAYSLICE   *(16)                 471D
                           PROTOTYPE
*RNF7031 JSON_ARRAYSORT    *(16)                 483D
                           PROTOTYPE
*RNF7031 JSON_ASJSONTEXT   A(32767)              573D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_ASJSONTEXTMEM...
                           U(10,0)               579D
                           PROTOTYPE
*RNF7031 JSON_ASTEXT       A(32767)             1021D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_ASXMLTEXT    A(32767)              602D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_ASXMLTEXTMEM U(10,0)               607D
                           PROTOTYPE
*RNF7031 JSON_BEFORE_SIBLING...
                           CONST                 389D
*RNF7031 JSON_BY_CONTEXT   CONST                  66D
*RNF7031 JSON_CHILD_LIST   CONST                  94D
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     33
*RNF7031 JSON_CLEAR        PROTOTYPE             746D
*RNF7031 JSON_CLONEFORMAT  PROTOTYPE             553D
*RNF7031 JSON_CLOSE        PROTOTYPE             751D
*RNF7031 JSON_COPY         PROTOTYPE             990D
*RNF7031 JSON_COPY_CLONE   CONST                 458D
*RNF7031 JSON_COPYVALUE    *(16)                 366D
                           PROTOTYPE
         JSON_DELETE       PROTOTYPE            1009D   1179M   1180M
*RNF7031 JSON_DELIMITERDS  DS(11)                635D
                           BASED(PROTOTYPE+)
*RNF7031   APOS            A(1)                  645D
*RNF7031   BACKSLASH       A(1)                  637D
*RNF7031   BLANK           A(1)                  641D
*RNF7031   BRABEG          A(1)                  639D
*RNF7031   BRAEND          A(1)                  640D
*RNF7031   CURBEG          A(1)                  643D
*RNF7031   CUREND          A(1)                  644D
*RNF7031   DOT             A(1)                  642D
*RNF7031   MASTERSPACE     A(1)                  638D
*RNF7031   QUOT            A(1)                  646D
*RNF7031   SLASH           A(1)                  636D
*RNF7031 JSON_DELIMITERS   CONST                  50D
*RNF7031 JSON_DONTREPLACE  CONST                 525D
*RNF7031 JSON_DUMP         PROTOTYPE             547D
*RNF7031 JSON_ELEMENTADD   *(16)                1057D
                           PROTOTYPE
*RNF7031 JSON_ELEMENTCOPY  PROTOTYPE             999D
*RNF7031 JSON_ELEMENTDELETE...
                           PROTOTYPE            1015D
*RNF7031 JSON_ELEMENTTYPE  I(5,0)               1050D
                           PROTOTYPE
*RNF7031 JSON_ERROR        N(1)                  122D
                           PROTOTYPE
*RNF7031 JSON_EVAL         CONST                  58D
*RNF7031 JSON_FIELDS       CONST                 832D
*RNF7031 JSON_FIRST_CHILD  CONST                 387D
*RNF7031 JSON_FOREACH      N(1)                  686D
                           PROTOTYPE
*RNF7031 JSON_GETATTR      A(32767)             1100D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETATTRFIRST *(16)                 728D
                           PROTOTYPE
*RNF7031 JSON_GETATTRNAME  A(32767)              739D
                           VARYING(2)
                           PROTOTYPE
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     34
*RNF7031 JSON_GETATTRNEXT  *(16)                 734D
                           PROTOTYPE
*RNF7031 JSON_GETATTRVALUE A(32767)              710D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETCHILD     *(16)                 195D
                           PROTOTYPE
*RNF7031 JSON_GETDELIMITERS...
                           *(16)                  42D
                           PROTOTYPE
*RNF7031 JSON_GETELEMCHILD *(16)                1077D
                           PROTOTYPE
*RNF7031 JSON_GETELEMNAME  A(32767)             1084D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETELEMNEXT  *(16)                1070D
                           PROTOTYPE
*RNF7031 JSON_GETELEMVALUE A(32767)             1091D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETILOBVALUE N(1)                  357D
                           PROTOTYPE
*RNF7031 JSON_GETINT       I(20,0)               346D
                           PROTOTYPE
*RNF7031 JSON_GETLENGTH    I(10,0)               509D
                           PROTOTYPE
*RNF7031 JSON_GETNAME      A(32767)              291D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETNAMEASPATH...
                           A(32767)              297D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETNEXT      *(16)                 189D
                           PROTOTYPE
*RNF7031 JSON_GETNODEATTRVALUE...
                           A(32767)              691D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETNUM       P(30,15)              337D
                           PROTOTYPE
*RNF7031 JSON_GETPARENT    *(16)                 201D
                           PROTOTYPE
         JSON_GETSTR       A(32767)              314D   1175
                           VARYING(2)
                           PROTOTYPE
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     35
*RNF7031 JSON_GETSTRJOIN   A(32767)              324D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETVALUE     A(32767)              980D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_GETVALUENUM  P(30,15)              276D
                           PROTOTYPE
*RNF7031 JSON_GETVALUEPTR  *(16)                 284D
                           PROTOTYPE
*RNF7031 JSON_GETVALUESTR  A(32767)              268D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_HAS          N(1)                  151D
                           PROTOTYPE
         JSON_HTTPREQUEST  *(16)                 960D   1172
                           PROTOTYPE
*RNF7031 JSON_IGNORE_CASE  CONST                 506D
*RNF7031 JSON_ISNODE       N(1)                  175D
                           PROTOTYPE
*RNF7031 JSON_ISNULL       N(1)                  167D
                           PROTOTYPE
*RNF7031 JSON_ISTRUE       N(1)                  159D
                           PROTOTYPE
         JSON_ITERATOR     DS(145)               650D    668     676     687
                           BASED(PROTOTYPE+)
*RNF7031   BREAK           N(1)                  664D
*RNF7031   COMMA           A(1)                  657D
                           VARYING(2)
*RNF7031   COUNT           I(10,0)               658D
*RNF7031   FILLER          A(64)                 665D
*RNF7031   ISFIRST         N(1)                  654D
*RNF7031   ISLAST          N(1)                  655D
*RNF7031   ISLIST          N(1)                  653D
*RNF7031   ISRECURSIVE     N(1)                  656D
*RNF7031   LENGTH          I(10,0)               659D
*RNF7031   LISTARR         *(16)                 662D
*RNF7031   ROOT            *(16)                 651D
*RNF7031   SIZE            I(10,0)               660D
*RNF7031   THIS            *(16)                 652D
*RNF7031 JSON_LAST_CHILD   CONST                 388D
*RNF7031 JSON_LITERAL      CONST                  62D
*RNF7031 JSON_LOCATE       *(16)                 134D
                           PROTOTYPE
*RNF7031 JSON_LOCATEORCREATE...
                           *(16)                 142D
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     36
                           PROTOTYPE
*RNF7031 JSON_LOOKUPVALUE  *(16)                 495D
                           PROTOTYPE
*RNF7031 JSON_MAPIX        N(1)                  780D
                           PROTOTYPE
*RNF7031 JSON_MEMLEAK      N(1)                  756D
                           PROTOTYPE
*RNF7031 JSON_MEMSTAT      PROTOTYPE             760D
*RNF7031 JSON_MEMUSE       U(20,0)               764D
                           PROTOTYPE
*RNF7031 JSON_MERGE        *(16)                 515D
                           PROTOTYPE
*RNF7031 JSON_MERGEOBJECTS *(16)                 529D
                           PROTOTYPE
*RNF7031 JSON_MESSAGE      A(1024)               128D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_META         CONST                 830D
*RNF7031 JSON_MOVE_MODES   CONST                  72D
*RNF7031 JSON_MOVE_UNLINK  CONST                 457D
*RNF7031 JSON_MOVEOBJECTINTO...
                           *(16)                 539D
                           PROTOTYPE
*RNF7031 JSON_NEWARRAY     *(16)                 441D
                           PROTOTYPE
         JSON_NEWOBJECT    *(16)                 434D   1164
                           PROTOTYPE
*RNF7031 JSON_NODEADD      *(16)                 398D
                           PROTOTYPE
*RNF7031 JSON_NODECHECKSUM U(10,0)               429D
                           PROTOTYPE
*RNF7031 JSON_NODECLONE    *(16)                 392D
                           PROTOTYPE
*RNF7031 JSON_NODECOPY     PROTOTYPE             377D
*RNF7031 JSON_NODEDELETE   PROTOTYPE             411D
*RNF7031 JSON_NODERENAME   N(1)                  181D
                           PROTOTYPE
*RNF7031 JSON_NODESANITIZE PROTOTYPE             422D
*RNF7031 JSON_NODETYPE     I(5,0)                306D
                           PROTOTYPE
*RNF7031 JSON_NODEUNLINK   *(16)                 417D
                           PROTOTYPE
*RNF7031 JSON_OBJCOPY      CONST                  65D
*RNF7031 JSON_OBJECT       CONST                  56D
*RNF7031 JSON_OBJLINK      CONST                  63D
*RNF7031 JSON_OBJMOVE      CONST                  67D
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     37
*RNF7031 JSON_OBJREPLACE   CONST                  64D
*RNF7031 JSON_PARSE        CONST                  78D
*RNF7031 JSON_PARSEFILE    *(16)                  98D
                           PROTOTYPE
*RNF7031 JSON_PARSESTRING  *(16)                 106D
                           PROTOTYPE
*RNF7031 JSON_POINTER_VALUE...
                           CONST                  59D
*RNF7031 JSON_REPLACE      CONST                 526D
*RNF7031 JSON_ROOT         CONST                  61D
*RNF7031 JSON_ROWARRAY     CONST                 828D
*RNF7031 JSON_SAME_CASE    CONST                 505D
*RNF7031 JSON_SEGMENTDISPOSE...
                           PROTOTYPE             774D
*RNF7031 JSON_SEGMENTSELECTNO...
                           *(16)                 768D
                           PROTOTYPE
*RNF7031 JSON_SETATTRVALUE PROTOTYPE             718D
*RNF7031 JSON_SETBOOL      *(16)                 239D
                           PROTOTYPE
*RNF7031 JSON_SETCCSID     PROTOTYPE            1112D
*RNF7031 JSON_SETDEC       *(16)                1120D
                           PROTOTYPE
*RNF7031 JSON_SETDECPOINT  PROTOTYPE             114D
*RNF7031 JSON_SETDELIMITERS...
                           PROTOTYPE              45D
*RNF7031 JSON_SETEVAL      *(16)                 206D
                           PROTOTYPE
*RNF7031 JSON_SETINT       *(16)                 221D
                           PROTOTYPE
*RNF7031 JSON_SETITERATOR  DS(145)               668D
                           PROTOTYPE
*RNF7031 JSON_SETNODEATTRVALUE...
                           PROTOTYPE             701D
*RNF7031 JSON_SETNUM       *(16)                 230D
                           PROTOTYPE
*RNF7031 JSON_SETPTR       *(16)                 248D
                           PROTOTYPE
*RNF7031 JSON_SETRECURSIVEITERATOR...
                           DS(145)               676D
                           PROTOTYPE
         JSON_SETSTR       *(16)                 212D   1165M   1166M
                           PROTOTYPE
*RNF7031 JSON_SETVALUE     *(16)                 257D
                           PROTOTYPE
*RNF7031 JSON_SQLCLOSE     PROTOTYPE             887D
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     38
*RNF7031 JSON_SQLCODE      I(10,0)               956D
                           PROTOTYPE
*RNF7031 JSON_SQLCOLUMNS   I(10,0)               873D
                           PROTOTYPE
*RNF7031 JSON_SQLCONNECT   *(16)                 946D
                           PROTOTYPE
*RNF7031 JSON_SQLDISCONNECT...
                           PROTOTYPE             952D
*RNF7031 JSON_SQLEXEC      N(1)                  894D
                           PROTOTYPE
*RNF7031 JSON_SQLFETCHNEXT *(16)                 866D
                           PROTOTYPE
*RNF7031 JSON_SQLFETCHRELATIVE...
                           *(16)                 856D
                           PROTOTYPE
*RNF7031 JSON_SQLGETINSERTID...
                           I(10,0)               937D
                           PROTOTYPE
*RNF7031 JSON_SQLGETMETA   *(16)                 941D
                           PROTOTYPE
*RNF7031 JSON_SQLINSERT    N(1)                  915D
                           PROTOTYPE
*RNF7031 JSON_SQLOPEN      *(16)                 847D
                           PROTOTYPE
*RNF7031 JSON_SQLRESULTROW *(16)                 801D
                           PROTOTYPE
*RNF7031 JSON_SQLRESULTSET *(16)                 810D
                           PROTOTYPE
*RNF7031 JSON_SQLROWS      I(10,0)               881D
                           PROTOTYPE
*RNF7031 JSON_SQLSETOPTIONS...
                           PROTOTYPE             794D
*RNF7031 JSON_SQLUPDATE    N(1)                  903D
                           PROTOTYPE
*RNF7031 JSON_SQLUPSERT    N(1)                  925D
                           PROTOTYPE
*RNF7031 JSON_STREAM       *(16)                 615D
                           PROTOTYPE
*RNF7031 JSON_TOTALROWS    CONST                 835D
*RNF7031 JSON_TRACESETID   PROTOTYPE             972D
*RNF7031 JSON_UNKNOWN      CONST                  55D
*RNF7031 JSON_UPPERCASE    CONST                 837D
*RNF7031 JSON_USE_LOCALE   CONST                 492D
*RNF7031 JSON_VALUE        CONST                  60D
*RNF7031 JSON_WRITECSVSTMF PROTOTYPE             621D
*RNF7031 JSON_WRITEJSONSTMF...
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     39
                           PROTOTYPE             561D
*RNF7031 JSON_WRITESTMF    PROTOTYPE            1132D
*RNF7031 JSON_WRITEXMLSTMF PROTOTYPE             590D
*RNF7031 JSON_XPATHVALUE   A(32767)             1028D
                           VARYING(2)
                           PROTOTYPE
*RNF7031 JSON_XPATHVALUENUM...
                           P(30,15)             1039D
                           PROTOTYPE
         MAIN              PROTOTYPE              11    1153
*RNF7031 MO_MERGE_MATCH    CONST                  88D
*RNF7031 MO_MERGE_NEW      CONST                  86D
*RNF7031 MO_MERGE_REPLACE  CONST                  91D
         PROTOTYPE_ONLY    *(16)                 635     650
*RNF7031 XML_WRITESTMF     PROTOTYPE            1142D
      Field References for subprocedure MAIN
         Field             Attributes         References (D=Defined M=Modified)
         APPKEY            CONST                1160D   1171
         EXTRAPARMS        A(4096)              1159D   1171M   1172
                           VARYING(2)
         PINPUT            *(16)                1155D   1164M   1165    1166
                                                1172    1179
         POUTPUT           *(16)                1156D   1172M   1175    1180
         TEXT              A(50)                1158D   1175M   1176
         URL               A(1024)              1157D   1168M   1172
                           VARYING(2)
      Indicator References:
         Indicator                            References (D=Defined M=Modified)
       * * * * *   E N D   O F   C R O S S   R E F E R E N C E   * * * * *
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     40
                      E x t e r n a l   R e f e r e n c e s
      Statically bound procedures:
         Procedure                            References
         jx_Has                                  151
         jx_Dump                                 547
         jx_Error                                122
         jx_Clear                                746
         jx_Close                                751
         jx_MapIx                                780
         jx_IsTrue                               159
         jx_IsNull                               167
         jx_isNode                               175
         jx_Stream                               615
         jx_MemUse                               764
         jx_Message                              128
         jx_GetNode                              134
         jx_NodeAdd                              398    1057
         jx_ForEach                              686
         jx_MemLeak                              756
         jx_MemStat                              760
         jx_sqlOpen                              847
         jx_sqlRows                              881
         jx_sqlExec                              894
         jx_sqlCode                              956
         jx_NodeCopy                             377     990     999
         jx_NewArray                             441
         jx_sqlClose                             887
         jx_SetCcsid                            1112
         jx_ParseFile                             98
         jx_CopyValue                            366
         jx_NodeClone                            392
         jx_NewObject                            434    1164
         jx_ArrayPush                            447
         jx_ArraySort                            483
         jx_getLength                            509
         jx_NodeMerge                            515
         jx_AsXmlText                            602
         jx_sqlUpdate                            903
         jx_sqlInsert                            915
         jx_sqlUpsert                            925
         jx_NodeRename                           181
         jx_GetValueVC                           314     980    1029    1175
         jx_NodeDelete                           411    1009    1015    1179
                                                1180
         jx_NodeUnlink                           417
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     41
         jx_ArraySlice                           471
         jx_AsJsonText                           574    1021
         jx_sqlColumns                           873
         jx_sqlGetMeta                           941
         jx_sqlConnect                           946
         jx_traceSetId                           972
         jx_ParseString                          106
         jx_SetDecPoint                          114
         jx_GetNodeNext                          189    1070
         jx_GetNodeType                          306    1050
         jx_GetValueNum                          337    1040
         jx_GetValueInt                          346
         jx_ArrayAppend                          461
         jx_lookupValue                          495
         jx_CloneFormat                          553
         jx_SetIterator                          669
         jx_GetAttrNext                          734
         jx_httpRequest                          960    1172
         jx_GetNodeChild                         195    1077
         jx_SetStrByName                         212    1165    1166
         jx_SetIntByName                         221
         jx_SetDecByName                         230    1120
         jx_SetPtrByName                         248
         jx_GetStrJoinVC                         325
         jx_NodeSanitize                         422
         jx_NodeCheckSum                         429
         jx_MergeObjects                         529
         jx_NodeMoveInto                         539
         jx_WriteXmlStmf                         590    1142
         jx_AsXmlTextMem                         607
         jx_WriteCsvStmf                         621
         jx_SetAttrValue                         718
         jx_GetAttrFirst                         728
         jx_sqlResultRow                         801
         jx_sqlResultSet                         810
         jx_sqlFetchNext                         866
         jx_GetDelimiters                         42
         jx_GetNodeParent                        201
         jx_SetEvalByName                        206
         jx_SetBoolByName                        239
         jx_GetNodeNameVC                        292    1085
         ILOB_XmlGetValue                        357
         jx_WriteJsonStmf                        561    1132
         jx_AsJsonTextMem                        580
         jx_GetAttrNameVC                        740
         jx_sqlSetOptions                        794
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     42
         jx_sqlDisconnect                        952
         jx_SetDelimiters2                        45
         jx_SetValueByName                       257
         jx_GetNodeValueVC                       269    1092
         jx_GetAttrValueVC                       711
         jx_SegmentDispose                       774
         jx_sqlGetInsertId                       937
         jx_GetOrCreateNode                      143
         jx_GetNodeValueNum                      277
         jx_GetNodeValuePtr                      284
         jx_SegmentSelectNo                      769
         jx_SetNodeAttrValue                     701
         jx_sqlFetchRelative                     857
         jx_GetNodeNameAsPath                    298
         jx_GetNodeAttrValueVC                   692    1101
         jx_SetRecursiveIterator                 678
      Imported fields:
         Field             Attributes         Defined
         No references in the source.
      Exported fields:
         Field             Attributes         Defined
         No references in the source.
   * * * * *   E N D   O F   E X T E R N A L   R E F E R E N C E S   * * * * *
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     43
                          M e s s a g e   S u m m a r y
 Msg id  Sv Number Message text
*RNF5409 00      2 The prototyped call returns a value which is lost when CALLP
                   is used.
*RNF7031 00    180 The name or indicator is not referenced.
       * * * * *   E N D   O F   M E S S A G E   S U M M A R Y   * * * * *
 5770WDS V7R3M0  160422 RN        IBM ILE RPG             NOXDB/EXWATSON           DKSRV133   12-12-18 14:34:54        Page     44
                            F i n a l   S u m m a r y
  Message Totals:
    Information  (00) . . . . . . . :      182
    Warning      (10) . . . . . . . :        0
    Error        (20) . . . . . . . :        0
    Severe Error (30+)  . . . . . . :        0
    ---------------------------------  -------
    Total . . . . . . . . . . . . . :      182
  Source Totals:
    Records . . . . . . . . . . . . :     1182
    Specifications  . . . . . . . . :      595
    Data records  . . . . . . . . . :        0
    Comments  . . . . . . . . . . . :      425
         * * * * *   E N D   O F   F I N A L   S U M M A R Y   * * * * *
Program EXWATSON placed in library NOXDB. 00 highest severity. Created on 12-12-18 at 14:34:54.
          * * * * *   E N D   O F   C O M P I L A T I O N   * * * * *
